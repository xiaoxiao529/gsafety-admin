(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{521:function(e,t,d){var content=d(631);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,d(14).default)("44e6015b",content,!0,{sourceMap:!1})},630:function(e,t,d){"use strict";var n=d(521);d.n(n).a},631:function(e,t,d){(e.exports=d(13)(!1)).push([e.i,".main-body[data-v-5b889b9d]{height:calc(100vh - 239px)}.main-body .el-main[data-v-5b889b9d]{padding:0 15px 10px}.main-body .el-main .el-checkbox[data-v-5b889b9d]{margin-bottom:10px}.main-body .el-main .card-body[data-v-5b889b9d]{padding-top:15px}.main-body .aside-wrap[data-v-5b889b9d]{border-right:1px solid #dcdcdc}.main-body .aside-wrap .aside-main-header[data-v-5b889b9d]{font-size:16px;padding:15px 20px;border-bottom:1px solid #dcdcdc;line-height:30px;font-weight:700}.main-body .aside-wrap .type-item[data-v-5b889b9d]{padding:10px 20px;height:24px;line-height:24px;font-size:14px;display:block;border-left:3px solid #fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.main-body .aside-wrap .type-item.active[data-v-5b889b9d]{border-left:3px solid #1970ed;background:#f9f9f9}",""])},765:function(e,t,d){"use strict";d.r(t);d(2),d(3),d(4),d(5);var n={components:{},data:function(){return{isLoading:!1,tabPosition:"left",userType:[],gjApp:[],gjWeb:[],currentCode:"01",checkAllApp:!1,checkAllWeb:!1,checkedIds:[],checkedIdsArry:[],isIndeterminate:!1,sysCode:[{name:"消防管家Web",id:"10"},{name:"消防管家App",id:"11"}]}},mounted:function(){this.userTypeTree(),this.checkboxList(),this.querySaveUserTypeConInfo()},computed:{},methods:{handleCheckedIdsChange:function(e,t){for(var i=0;i<this.checkedIdsArry.length;i++)if(this.checkedIdsArry[i].roleId==t)return void this.checkedIdsArry.splice(i,1);this.checkedIdsArry.push({sysCode:e,roleId:t})},userTypeTree:function(){var e=this;e.$axios.$POST_NEW({api_name:"queryUserType"}).then(function(t){if(e.isLoading=!1,"success"==t.data.code){var data=t.data.data;e.userType=data.userType}else e.userType=[],console.log("没有数值。。。。。")})},changeHandel:function(data){this.currentCode=data.typeCode,this.querySaveUserTypeConInfo()},querySaveUserTypeConInfo:function(){var e=this,t=this;t.$axios.$POST_NEW({api_name:"querySaveUserTypeConInfo",params:{modelType:"2",userType:t.currentCode}}).then(function(e){if(t.isLoading=!1,"success"==e.data.code){var data=e.data.data,d=JSON.parse(data.roleInfo);t.checkedIds=[],t.checkedIdsArry=[];for(var i=0;i<d.length;i++)t.checkedIds.push(d[i].roleId),t.checkedIdsArry.push(d[i])}else t.checkedIds=[]}).catch(function(){e.$message.error("查询已保存用户类型配置异常")})},saveUserTypeConInfo:function(){var e=this,t=this;0!=t.checkedIdsArry.length?t.$axios.$POST_NEW({api_name:"saveUserTypeConInfo",params:{modelType:"2",userType:t.currentCode,roleInfo:JSON.stringify(t.checkedIdsArry)}}).then(function(e){t.isLoading=!1,"success"==e.data.code?t.$message.success("保存用户类型成功"):t.$message.error(e.data.message)}).catch(function(){e.$message.error("保存用户类型配置异常")}):t.$message.warning("未选中角色!")},checkboxList:function(){var e=this;e.$axios.$POST_NEW({api_name:"queryRole"}).then(function(t){if(e.isLoading=!1,"success"==t.data.code){var data=t.data.data;e.gjApp=data.gjApp,e.gjWeb=data.gjWeb}else e.gjApp=[],e.gjWeb=[],e.$message({message:"右侧checkbox获取失败",type:"error"})}).catch(function(){e.$message({message:"右侧checkbox获取异常",type:"warning"})})}}},c=(d(630),d(17)),component=Object(c.a)(n,function(){var e=this,t=e.$createElement,d=e._self._c||t;return d("div",[d("div",{staticClass:"main-wrap"},[d("el-container",{staticClass:"main-body"},[d("el-aside",{staticClass:"aside-wrap",attrs:{width:"220px"}},[d("div",{staticClass:"aside-main-header"},[e._v("\n          用户类型\n        ")]),e._v(" "),d("ul",{staticClass:"aside-main-panel"},e._l(e.userType,function(t){return d("li",{key:t.id,class:t.typeCode==e.currentCode?"type-item active":"type-item",on:{click:function(d){return e.changeHandel(t)}}},[d("span",[e._v(e._s(t.typeName))])])}),0)]),e._v(" "),d("el-container",[d("el-header",{staticStyle:{"text-align":"right",padding:"10px 15px"},attrs:{height:"60px"}},[d("el-button",{attrs:{type:"primary"},on:{click:e.saveUserTypeConInfo}},[e._v("保存")])],1),e._v(" "),d("el-main",[d("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"20px"}},[d("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[d("span",[e._v(e._s(e.sysCode[0].name))])]),e._v(" "),d("div",{staticClass:"card-body"},[d("el-checkbox-group",{model:{value:e.checkedIds,callback:function(t){e.checkedIds=t},expression:"checkedIds"}},e._l(e.gjWeb,function(t){return d("el-checkbox",{key:t.id,attrs:{label:t.id},on:{change:function(d){return e.handleCheckedIdsChange(e.sysCode[0].id,t.id)}}},[e._v(e._s(t.roleName))])}),1)],1)]),e._v(" "),d("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"20px"}},[d("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[d("span",[e._v(e._s(e.sysCode[1].name))])]),e._v(" "),d("div",{staticClass:"card-body"},[d("el-checkbox-group",{model:{value:e.checkedIds,callback:function(t){e.checkedIds=t},expression:"checkedIds"}},e._l(e.gjApp,function(t){return d("el-checkbox",{key:t.id,attrs:{label:t.id},on:{change:function(d){return e.handleCheckedIdsChange(e.sysCode[1].id,t.id)}}},[e._v(e._s(t.roleName))])}),1)],1)])],1)],1)],1)],1)])},[],!1,null,"5b889b9d",null);t.default=component.exports}}]);