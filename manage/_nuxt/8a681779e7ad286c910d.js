(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{491:function(t,e,o){"use strict";var r=o(15),l=o(504)(5),c=!0;"find"in[]&&Array(1).find(function(){c=!1}),r(r.P+r.F*c,"Array",{find:function(t){return l(this,t,arguments.length>1?arguments[1]:void 0)}}),o(158)("find")},504:function(t,e,o){var r=o(53),l=o(157),c=o(54),n=o(41),m=o(505);t.exports=function(t,e){var o=1==t,d=2==t,k=3==t,f=4==t,y=6==t,S=5==t||y,v=e||m;return function(e,m,D){for(var F,h,T=c(e),_=l(T),x=r(m,D,3),w=n(_.length),$=0,C=o?v(e,w):d?v(e,0):void 0;w>$;$++)if((S||$ in _)&&(h=x(F=_[$],$,T),t))if(o)C[$]=h;else if(h)switch(t){case 3:return!0;case 5:return F;case 6:return $;case 2:C.push(F)}else if(f)return!1;return y?-1:k||f?f:C}}},505:function(t,e,o){var r=o(506);t.exports=function(t,e){return new(r(t))(e)}},506:function(t,e,o){var r=o(18),l=o(241),c=o(6)("species");t.exports=function(t){var e;return l(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!l(e.prototype)||(e=void 0),r(e)&&null===(e=e[c])&&(e=void 0)),void 0===e?Array:e}},596:function(t,e,o){var content=o(785);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(14).default)("5977640c",content,!0,{sourceMap:!1})},763:function(t,e,o){"use strict";o.r(e);o(491),o(2),o(3),o(4),o(5);var r={data:function(){return{userObj:{},fullscreenLoading:!1,clickModalFlag:!1,dialogOutStockVisible:!1,labelPosition:"top",outStockFormData:{applyType:0,applyProject:"",applyPerson:"",orgCode:"",applyOrg:"",applyUnit:"",repositoryType:0,deviceSysVal:"",device:"",deviceName:"",count:"",factory:"",model:"",brand:"",protocol:"",supplier:"",measurementUnit:"",price:"",taxRate:"",netSignal:"",flowYear:"",remarks:""},lockScroll:!0,deviceSys:[],optsTemp:[],hardwareTypeTreeList:[],parentTypeNameList:[],orgList:[],unitList:[],repositoryTypeList:[{value:0,label:"仓库入库"},{value:1,label:"直发采购入库"}],applyTypeList:[{value:0,label:"运营中心"},{value:1,label:"企业项目"},{value:2,label:"其它"}],rules:{applyPerson:[{required:!0,message:"申请人不能为空",trigger:"blur"}],orgCode:[{required:!0,message:"运营中心不能为空",trigger:"change"}],applyProject:[{required:!0,message:"申请项目不能为空",trigger:"blur"}],applyUnit:[{required:!0,message:"申请单位不能为空",trigger:"change"}],repositoryType:[{required:!0,message:"入库类型不能为空",trigger:"change"}],deviceSysVal:[{required:!0,message:"硬件父类不能为空",trigger:"change"}],device:[{required:!0,message:"硬件子类不能为空",trigger:"change"}],deviceName:[{required:!0,message:"设备名称不能为空",trigger:"blur"}],count:[{required:!0,message:"数量不能为空",trigger:"blur"},{type:"number",min:1,max:1e4,message:"必须是1-10000数字"}],factory:[{required:!0,message:"厂家不能为空",trigger:"blur"}],brand:[{required:!0,message:"品牌不能为空",trigger:"blur"}],model:[{required:!0,message:"型号不能为空",trigger:"blur"}],protocol:[],supplier:[{required:!0,message:"供应商不能为空",trigger:"blur"}],measurementUnit:[{required:!0,message:"计量单位不能为空",trigger:"blur"}],price:[{required:!0,message:"单价(元)不能为空",trigger:"blur"},{pattern:/^\d+(\.\d{1,2})?$/,message:"请输入最多小数点后两位的金额"}],taxRate:[{required:!0,message:"税率(%)不能为空",trigger:"blur"},{pattern:/((^[1-9]\d*)|^0)(\.\d{0,2}){0,1}$/,message:"请输入正确的税率"}],netSignal:[{required:!0,message:"网络信号不能为空",trigger:"blur"}],flowYear:[{required:!1,trigger:"blur"},{pattern:/^[0-9]*$/,message:"必须是数字",trigger:"blur"}],remarks:[{required:!0,message:"备注不能为空",trigger:"blur"}]}}},mounted:function(){this.getAllOrgInfo(),this.getHardwareTypeTree(),this.userObj=this._Storage.getObj("userObj","userObj")},computed:{},methods:{initInStock:function(){var t=this;t.dialogOutStockVisible=!0,t.repositoryType="0",t.outStockFormData.applyPerson="",t.outStockFormData.applyType=0,t.outStockFormData.repositoryType=0,t.$nextTick(function(){t.$refs.outStockFormData.resetFields()})},getHardwareTypeTree:function(){var t=this;t.$axios.$GET({api_name:"getHardwareTypeTree"}).then(function(e){"success"==e.data.code?(t.hardwareTypeTreeList=e.data.data,null!=t.hardwareTypeTreeList&&t.hardwareTypeTreeList.length>0&&t.hardwareTypeTreeList.forEach(function(e){var o={};o.label=e.typeName,o.value=e.code,t.deviceSys.push(o)})):t.$message({message:"数据获取失败",type:"error"})}).catch(function(){t.$message({message:"数据获取异常",type:"warning"})})},getChildrenHardwareType:function(t){var e=this;if(e.outStockFormData.device="",e.optsTemp=[],null!=e.hardwareTypeTreeList&&e.hardwareTypeTreeList.length>0)for(var i=0;i<e.hardwareTypeTreeList.length;i++)if(t===e.hardwareTypeTreeList[i].code){var o=e.hardwareTypeTreeList[i].children;null!=o&&o.length>0&&function(){var t=[];o.forEach(function(o){var r={};r.label=o.typeName,r.value=o.code,e.optsTemp.push(r),t.push(o.code)})}();break}},inStockType:function(){var t=this;t.outStockFormData.applyProject="",t.outStockFormData.applyPerson="",t.outStockFormData.orgCode="",t.outStockFormData.applyUnit="",t.outStockFormData.applyOrg="",t.$nextTick(function(){t.$refs.outStockFormData.clearValidate()})},getAllOrgInfo:function(){var t=this;t.$axios.$GET({api_name:"getAllOrgInfo"}).then(function(e){"success"==e.data.code&&(t.orgList=e.data.data)})},getUnitInfoByOrgCode:function(t){var e=this;e.unitList=[],e.outStockFormData.applyUnit=null,e.$axios.$GET({api_name:"getUnitInfoByOrgCode",params:{orgCode:t}}).then(function(t){"success"==t.data.code&&(e.unitList=t.data.data)})},showButton:function(t,e){return 0===e&&(this.outStockFormData.applyProject=""),1!==e&&2!==e||(this.outStockFormData.orgCode="",this.outStockFormData.applyUnit=""),t.indexOf(1*e)>-1},submitHandel:function(){var t=this,e=null;t.$refs.outStockFormData.validate(function(o){if(!o)return console.log("error submit!!"),!1;t.outStockFormData.orgCode&&(t.outStockFormData.applyOrg=t.orgList.find(function(e){return e.orgCode==t.outStockFormData.orgCode}).orgName),t.outStockFormData.applyUnit&&(e=t.unitList.find(function(e){return e.unitId==t.outStockFormData.applyUnit}).unitName),t.fullscreenLoading=!0,t.$axios.$POST({api_name:"putInRepository",params:{repositoryType:t.outStockFormData.repositoryType,applyType:t.outStockFormData.applyType,applyPerson:t.outStockFormData.applyPerson,applyOrg:t.outStockFormData.applyOrg,orgCode:t.outStockFormData.orgCode,applyUnit:e,applyProject:t.outStockFormData.applyProject,deviceTypeCode:t.outStockFormData.device,deviceName:t.outStockFormData.deviceName,count:t.outStockFormData.count,factory:t.outStockFormData.factory,brand:t.outStockFormData.brand,model:t.outStockFormData.model,protocol:t.outStockFormData.protocol,supplier:t.outStockFormData.supplier,measurementUnit:t.outStockFormData.measurementUnit,price:t.outStockFormData.price,netSignal:t.outStockFormData.netSignal,taxRate:t.outStockFormData.taxRate,flowYear:t.outStockFormData.flowYear,remarks:t.outStockFormData.remarks,userId:t.userObj.id,userName:t.userObj.userName}}).then(function(e){t.fullscreenLoading=!1,"success"==e.data.code?(t.isLoading=!1,t.dialogOutStockVisible=!1,t.$message({message:e.data.rspMsg,type:"success"}),t.$emit("sureHandel")):(t.fullscreenLoading=!1,t.$message.error(e.data.rspMsg))}).catch(function(){t.fullscreenLoading=!1,t.$message({message:"这里是异常",type:"warning"})})})},cancelHandel:function(){this.outStockFormData={applyType:0,applyProject:"",applyPerson:"",orgCode:"",applyUnit:""},this.dialogOutStockVisible=!1},changeTipsClose:function(){var t=this;t.dialogVisible=!1,t.$nextTick(function(){t.$refs.outStockFormData.resetFields()})},changeTipsCancle:function(){var t=this;t.$nextTick(function(){t.$refs.outStockFormData.clearValidate()})}}},l=(o(784),o(17)),component=Object(l.a)(r,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"DialogStockWrap"},[o("el-dialog",{attrs:{title:"入库",visible:t.dialogOutStockVisible,"lock-scroll":t.lockScroll,width:"768px","close-on-click-modal":t.clickModalFlag,"close-on-press-escape":t.clickModalFlag},on:{"update:visible":function(e){t.dialogOutStockVisible=e}}},[o("div",{staticClass:"stock-mian"},[o("el-form",{ref:"outStockFormData",attrs:{rules:t.rules,"label-position":t.labelPosition,model:t.outStockFormData,"label-width":"120px"}},[o("div",{staticClass:"panel-wrap"},[o("el-form-item",{staticClass:"el-form-item-first",attrs:{label:"入库类型:",prop:"repositoryType"}},[o("el-radio-group",{on:{change:t.inStockType},model:{value:t.outStockFormData.repositoryType,callback:function(e){t.$set(t.outStockFormData,"repositoryType",e)},expression:"outStockFormData.repositoryType"}},t._l(t.repositoryTypeList,function(e){return o("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1)],1),t._v(" "),o("div",{staticClass:"panel-wrap"},[o("h4",{staticClass:"dialog-h3"},[t._v("申请信息")]),t._v(" "),o("div",[o("el-form-item",{staticClass:"el-form-item-first",attrs:{label:"申请类型:",required:"",prop:""}},[o("el-radio-group",{on:{change:t.changeTipsCancle},model:{value:t.outStockFormData.applyType,callback:function(e){t.$set(t.outStockFormData,"applyType",e)},expression:"outStockFormData.applyType"}},t._l(t.applyTypeList,function(e){return o("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),t._v(" "),0==t.outStockFormData.repositoryType?o("el-row",{attrs:{gutter:20}},[t.showButton([0,1,2],t.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"申请人:",prop:""}},[o("el-input",{attrs:{placeholder:"申请人"},model:{value:t.outStockFormData.applyPerson,callback:function(e){t.$set(t.outStockFormData,"applyPerson",e)},expression:"outStockFormData.applyPerson"}})],1)],1):t._e(),t._v(" "),t.showButton([0],t.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"运营中心:",prop:""}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{change:t.getUnitInfoByOrgCode},model:{value:t.outStockFormData.orgCode,callback:function(e){t.$set(t.outStockFormData,"orgCode",e)},expression:"outStockFormData.orgCode"}},t._l(t.orgList,function(t){return o("el-option",{key:t.orgCode,attrs:{label:t.orgName,value:t.orgCode}})}),1)],1)],1):t._e(),t._v(" "),t.showButton([0],t.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"申请单位:",prop:""}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.outStockFormData.applyUnit,callback:function(e){t.$set(t.outStockFormData,"applyUnit",e)},expression:"outStockFormData.applyUnit"}},t._l(t.unitList,function(t){return o("el-option",{key:t.unitId,attrs:{label:t.unitName,value:t.unitId}})}),1)],1)],1):t._e(),t._v(" "),t.showButton([1,2],t.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"申请项目:",prop:""}},[o("el-input",{attrs:{placeholder:"申请项目"},model:{value:t.outStockFormData.applyProject,callback:function(e){t.$set(t.outStockFormData,"applyProject",e)},expression:"outStockFormData.applyProject"}})],1)],1):t._e()],1):1==t.outStockFormData.repositoryType?o("el-row",{attrs:{gutter:20}},[t.showButton([0,1,2],t.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"申请人:",prop:"applyPerson"}},[o("el-input",{attrs:{placeholder:"申请人"},model:{value:t.outStockFormData.applyPerson,callback:function(e){t.$set(t.outStockFormData,"applyPerson",e)},expression:"outStockFormData.applyPerson"}})],1)],1):t._e(),t._v(" "),t.showButton([0],t.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"运营中心:",prop:"orgCode"}},[o("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{change:t.getUnitInfoByOrgCode},model:{value:t.outStockFormData.orgCode,callback:function(e){t.$set(t.outStockFormData,"orgCode",e)},expression:"outStockFormData.orgCode"}},t._l(t.orgList,function(t){return o("el-option",{key:t.orgCode,attrs:{label:t.orgName,value:t.orgCode}})}),1)],1)],1):t._e(),t._v(" "),t.showButton([0],t.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"申请单位:",prop:""}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.outStockFormData.applyUnit,callback:function(e){t.$set(t.outStockFormData,"applyUnit",e)},expression:"outStockFormData.applyUnit"}},t._l(t.unitList,function(t){return o("el-option",{key:t.unitId,attrs:{label:t.unitName,value:t.unitId}})}),1)],1)],1):t._e(),t._v(" "),t.showButton([1],t.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"申请项目:",prop:"applyProject"}},[o("el-input",{attrs:{placeholder:"申请项目"},model:{value:t.outStockFormData.applyProject,callback:function(e){t.$set(t.outStockFormData,"applyProject",e)},expression:"outStockFormData.applyProject"}})],1)],1):t._e(),t._v(" "),t.showButton([2],t.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"申请项目:",prop:""}},[o("el-input",{attrs:{placeholder:"申请项目"},model:{value:t.outStockFormData.applyProject,callback:function(e){t.$set(t.outStockFormData,"applyProject",e)},expression:"outStockFormData.applyProject"}})],1)],1):t._e()],1):t._e()],1)]),t._v(" "),o("div",{staticClass:"panel-wrap"},[o("h4",{staticClass:"dialog-h3"},[t._v("硬件信息")]),t._v(" "),o("div",[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"硬件父类:",prop:"deviceSysVal"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:t.getChildrenHardwareType},model:{value:t.outStockFormData.deviceSysVal,callback:function(e){t.$set(t.outStockFormData,"deviceSysVal","string"==typeof e?e.trim():e)},expression:"outStockFormData.deviceSysVal"}},t._l(t.deviceSys,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"硬件子类:",prop:"device"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},model:{value:t.outStockFormData.device,callback:function(e){t.$set(t.outStockFormData,"device","string"==typeof e?e.trim():e)},expression:"outStockFormData.device"}},t._l(t.optsTemp,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"硬件名称:",prop:"deviceName"}},[o("el-input",{attrs:{placeholder:"请输入硬件名称"},model:{value:t.outStockFormData.deviceName,callback:function(e){t.$set(t.outStockFormData,"deviceName",e)},expression:"outStockFormData.deviceName"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"数量:",prop:"count"}},[o("el-input",{attrs:{placeholder:"请输入1-10000数量"},model:{value:t.outStockFormData.count,callback:function(e){t.$set(t.outStockFormData,"count",t._n(e))},expression:"outStockFormData.count"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"厂家:",prop:"factory"}},[o("el-input",{attrs:{placeholder:"请输入厂家"},model:{value:t.outStockFormData.factory,callback:function(e){t.$set(t.outStockFormData,"factory",e)},expression:"outStockFormData.factory"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"型号:",prop:"model"}},[o("el-input",{attrs:{placeholder:"请输入型号"},model:{value:t.outStockFormData.model,callback:function(e){t.$set(t.outStockFormData,"model",e)},expression:"outStockFormData.model"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"品牌:",prop:"brand"}},[o("el-input",{attrs:{placeholder:"请输入品牌"},model:{value:t.outStockFormData.brand,callback:function(e){t.$set(t.outStockFormData,"brand",e)},expression:"outStockFormData.brand"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"供应商:",prop:"supplier"}},[o("el-input",{attrs:{placeholder:"请输入供应商"},model:{value:t.outStockFormData.supplier,callback:function(e){t.$set(t.outStockFormData,"supplier",e)},expression:"outStockFormData.supplier"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"计量单位:",prop:"measurementUnit"}},[o("el-input",{attrs:{placeholder:"请输入计量单位"},model:{value:t.outStockFormData.measurementUnit,callback:function(e){t.$set(t.outStockFormData,"measurementUnit",e)},expression:"outStockFormData.measurementUnit"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"单价(元):",prop:"price"}},[o("el-input",{attrs:{placeholder:"请输入单价(元)"},model:{value:t.outStockFormData.price,callback:function(e){t.$set(t.outStockFormData,"price",e)},expression:"outStockFormData.price"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"税率(%):",prop:"taxRate"}},[o("el-input",{attrs:{placeholder:"请输入税率(%)"},model:{value:t.outStockFormData.taxRate,callback:function(e){t.$set(t.outStockFormData,"taxRate",e)},expression:"outStockFormData.taxRate"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"协议号:",prop:"protocol"}},[o("el-input",{attrs:{placeholder:"请输入协议号"},model:{value:t.outStockFormData.protocol,callback:function(e){t.$set(t.outStockFormData,"protocol",e)},expression:"outStockFormData.protocol"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"网络信号:",prop:""}},[o("el-input",{attrs:{placeholder:"请输入网络信号"},model:{value:t.outStockFormData.netSignal,callback:function(e){t.$set(t.outStockFormData,"netSignal",e)},expression:"outStockFormData.netSignal"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"流量卡年限:",prop:"flowYear"}},[o("el-input",{attrs:{placeholder:"请输入流量卡年限"},model:{value:t.outStockFormData.flowYear,callback:function(e){t.$set(t.outStockFormData,"flowYear",e)},expression:"outStockFormData.flowYear"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"备注:",prop:""}},[o("el-input",{attrs:{placeholder:"请输入备注"},model:{value:t.outStockFormData.remarks,callback:function(e){t.$set(t.outStockFormData,"remarks",e)},expression:"outStockFormData.remarks"}})],1)],1)],1)],1)])])],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){return t.cancelHandel()}}},[t._v("取 消")]),t._v(" "),o("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(e){return t.submitHandel()}}},[t._v("确 定")])],1)])],1)},[],!1,null,"6865df53",null);e.default=component.exports},784:function(t,e,o){"use strict";var r=o(596);o.n(r).a},785:function(t,e,o){(t.exports=o(13)(!1)).push([t.i,".DialogStockWrap[data-v-6865df53]{font-family:MicrosoftYaHei}.DialogStockWrap .stock-mian[data-v-6865df53]{height:auto;max-height:450px}.DialogStockWrap .panel-wrap[data-v-6865df53]{margin-top:16px}.DialogStockWrap .panel-wrap .dialog-h3[data-v-6865df53]{font-size:18px;color:#25282e;font-weight:400;padding:12px 0;border-bottom:1px solid #e1e5eb;margin-bottom:10px}.DialogStockWrap[data-v-6865df53] .el-form--label-top .el-form-item-first{margin-bottom:0}.DialogStockWrap[data-v-6865df53] .el-form--label-top .el-form-item__label{padding:0;color:#525c66;font-size:16px}.DialogStockWrap[data-v-6865df53] .el-form--label-top .el-radio__label{font-size:16px;font-weight:400}.DialogStockWrap[data-v-6865df53] .el-form--label-top .el-select{width:100%}[data-v-6865df53] .el-loading-mask{background-color:hsla(0,0%,100%,.5)}",""])}}]);