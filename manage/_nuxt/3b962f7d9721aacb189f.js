(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1173:function(e,t,l){"use strict";l.r(t);l(33),l(2),l(3),l(4),l(5);var o={components:{Pagination:l(478).a},data:function(){return{btns:[{name:"离在线记录",isShow:!1}],currentBtns:[],isLoading:!1,formData:{onlineState:1,subCenterVal:"340100YYZX201805230001"},tableData:[],loading:!0,widgetInfo:{pageSize:10,pageNo:1,total:0},subCenter:[],units:[{value:" ",label:"全部"}],firstDevice:[{value:" ",label:"全部"}],secondDevice:[{value:" ",label:"全部"}],labelWidth:"100px",onlineStates:[{value:0,label:"离线"},{value:1,label:"在线"},{value:2,label:"未接入"}],dialogTableVisible:!1,recordData:[]}},mounted:function(){this.currentBtns=this._Storage.getObj("currentBtnArr","currentBtnArr"),this.isBtnShow()},created:function(){this.getSubCenterList(),this.changeSubCode(),this.getFirstDevice()},computed:{transformOnlineState:function(e){return function(e){return 0==e?"离线":1==e?"在线":2==e?"未接入":void 0}}},methods:{changeSubCode:function(){this.findUnitValue(),this.getFirstDevice()},getSecondDeviceHandle:function(){this.secondDevice=[],console.log(111),this.getSecondDevice()},getFirstDevice:function(){var e=this;this.$axios.$POST({api_name:"findDeviceIdValue",params:{subCenterCode:this.formData.subCenterVal}}).then(function(t){if("success"==t.data.code){e.firstDevice=[];var l;for(var o in l=t.data.data){var n={};n.value=l[o].value,n.label=l[o].label,e.firstDevice.push(n)}}else console.log("没有数值。。。。。")})},getSecondDevice:function(){var e=this;this.$axios.$POST({api_name:"findDeviceIdValue",params:{subCenterCode:this.formData.subCenterVal,deviceTypePid:this.formData.firstDeviceVal}}).then(function(t){if("success"==t.data.code){e.secondDevice=[],console.log(222);var l;for(var o in l=t.data.data){var n={};n.value=l[o].value,n.label=l[o].label,e.secondDevice.push(n)}}else console.log("没有数值。。。。。")})},getSubCenterList:function(){var e=this;this.$axios.$POST({api_name:"findSubCenterValue"}).then(function(t){if("success"==t.data.code){var l;for(var o in l=t.data.data){var n={};n.value=l[o].value,n.label=l[o].label,e.subCenter.push(n)}}})},findUnitValue:function(){var e=this;this.$axios.$POST({api_name:"findUnitValue",params:{subCenterCode:this.formData.subCenterVal}}).then(function(t){if("success"==t.data.code){e.units=[];var l;for(var o in l=t.data.data){var n={};n.value=l[o].value,n.label=l[o].label,e.units.push(n)}}else console.log("没有数值。。。。。")})},getEquipmentListPage:function(){var e=this;e.isLoading=!0,e.$axios.$POST({api_name:"findProjectDeviceList",params:{deviceId:e.formData.deviceId,subCenterCode:e.formData.subCenterVal,unitId:e.formData.unitVal,controlHost:e.formData.controlHost,deviceName:e.formData.deviceName,deviceTypeName:e.formData.deviceTypeName,onlineState:e.formData.onlineState,deviceTypePid:e.formData.firstDeviceVal,deviceTypeId:e.formData.secondDeviceVal,pageNo:e.widgetInfo.pageNo,pageSize:e.widgetInfo.pageSize}}).then(function(t){if("success"==t.data.code){e.isLoading=!1;var l=t.data.data;e.tableData=l.rows,e.widgetInfo.total=null===l.total?0:l.total}else e.isLoading=!1,e.tableData=[],e.widgetInfo.list=data.rows,e.widgetInfo.total=0,console.log("没有数值。。。。。")})},getLineRecord:function(e,t){var l=e.id,o=this;this.dialogTableVisible=!0,o.$axios.$POST({api_name:"findDeviceOfflineHisList",params:{monitorId:l}}).then(function(e){if("success"==e.data.code){console.log(e.data);var t=e.data.data;o.recordData=t}else o.recordData=[],console.log("没有数值。。。。。")})},sonHandleCurrentChange:function(e){this.widgetInfo.pageSize=e.pageSize?parseInt(e.pageSize):this.widgetInfo.pageSize,this.widgetInfo.pageNo=e.pageNo?parseInt(e.pageNo):this.widgetInfo.pageNo,this.getEquipmentListPage()},reset:function(e){this.formData={},this.getEquipmentListPage()},lookFor:function(){this.getEquipmentListPage()},isBtnShow:function(){var e=this.currentBtns;this.btns.forEach(function(element){e.forEach(function(e){e.name===element.name&&(element.isShow=e.isShow)})})}}},n=(l(776),l(778),l(17)),component=Object(n.a)(o,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"Crumbs"},[l("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[l("el-breadcrumb-item",[e._v("硬件平台")]),e._v(" "),l("el-breadcrumb-item",[e._v("项目设备列表")])],1)],1),e._v(" "),l("div",{staticClass:"main-wrap"},[l("el-row",{staticClass:"location"},[l("el-col",{attrs:{span:12}},[l("h3",[e._v("项目设备列表")])])],1),e._v(" "),l("div",{staticClass:"main-container"},[l("el-form",{ref:"formData",staticClass:"hardware-form",attrs:{inline:!0,model:e.formData}},[l("el-form-item",{attrs:{label:"设备ID:","label-width":e.labelWidth}},[l("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.deviceId,callback:function(t){e.$set(e.formData,"deviceId",t)},expression:"formData.deviceId"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"运营中心:","label-width":e.labelWidth}},[l("el-select",{attrs:{placeholder:"请选择"},on:{change:e.changeSubCode},model:{value:e.formData.subCenterVal,callback:function(t){e.$set(e.formData,"subCenterVal","string"==typeof t?t.trim():t)},expression:"formData.subCenterVal"}},e._l(e.subCenter,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"单位名称:","label-width":e.labelWidth}},[l("el-select",{attrs:{placeholder:"全部",filterable:""},model:{value:e.formData.unitVal,callback:function(t){e.$set(e.formData,"unitVal","string"==typeof t?t.trim():t)},expression:"formData.unitVal"}},e._l(e.units,function(e,t){return l("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"序列号:","label-width":e.labelWidth}},[l("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.controlHost,callback:function(t){e.$set(e.formData,"controlHost",t)},expression:"formData.controlHost"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"一级类型:","label-width":e.labelWidth}},[l("el-select",{attrs:{placeholder:"请选择",filterable:""},on:{change:e.getSecondDeviceHandle},model:{value:e.formData.firstDeviceVal,callback:function(t){e.$set(e.formData,"firstDeviceVal","string"==typeof t?t.trim():t)},expression:"formData.firstDeviceVal"}},e._l(e.firstDevice,function(e,t){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"二级类型:","label-width":e.labelWidth}},[l("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:e.formData.secondDeviceVal,callback:function(t){e.$set(e.formData,"secondDeviceVal","string"==typeof t?t.trim():t)},expression:"formData.secondDeviceVal"}},e._l(e.secondDevice,function(e,t){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"当前状态:","label-width":e.labelWidth}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.onlineState,callback:function(t){e.$set(e.formData,"onlineState","string"==typeof t?t.trim():t)},expression:"formData.onlineState"}},e._l(e.onlineStates,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:" "}},[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.lookFor()}}},[e._v("查询")]),e._v(" "),l("el-button",{attrs:{size:"small"},on:{click:function(t){return e.reset("formData")}}},[e._v("重置")])],1)],1),e._v(" "),l("div",{staticClass:"list-wrap"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.isLoading,expression:"isLoading",modifiers:{lock:!0}}],attrs:{data:e.tableData,stripe:"","show-overflow-tooltip":""}},[l("el-table-column",{attrs:{label:"设备ID",prop:"deviceId","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"序列号",prop:"controlHost","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"运营中心",prop:"subCenterName","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"单位名称",prop:"unitName","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"安装位置",prop:"deviceAddress","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"设备名称",prop:"deviceName","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"二级类型",prop:"deviceTypeName","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"厂家",prop:"sourceId","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"品牌",prop:"brand","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"型号",prop:"model","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"当前状态",prop:"onlineState","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("div",[e._v(e._s(e.transformOnlineState(t.row.onlineState)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"信号最后上传时间",prop:"lastOnlineTime","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"安装时间",prop:"installTime","show-overflow-tooltip":""}}),e._v(" "),l("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-link",{directives:[{name:"show",rawName:"v-show",value:e.btns[0].isShow,expression:"btns[0].isShow"}],attrs:{type:"primary"},on:{click:function(l){return e.getLineRecord(t.row,t.$index)}}},[e._v("离/在线记录")])]}}])})],1),e._v(" "),l("Pagination",{attrs:{widgetInfo:e.widgetInfo},on:{sonHandleCurrentChange:e.sonHandleCurrentChange}})],1)],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"离在线历史记录",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[l("div",{staticClass:"record-table"},[l("el-scrollbar",{staticStyle:{height:"100%"}},[l("el-table",{attrs:{stripe:"",data:e.recordData}},[l("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),e._v(" "),l("el-table-column",{attrs:{prop:"stateTime",label:"时间",width:""}}),e._v(" "),l("el-table-column",{attrs:{prop:"onlineState",label:"当前状态",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[l("div",[e._v(e._s(e.transformOnlineState(t.row.onlineState)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"offlineTime",label:"离线时间"}})],1)],1)],1)])],1)},[],!1,null,"17487e5c",null);t.default=component.exports},478:function(e,t,l){"use strict";l(2),l(3),l(4),l(5);var o={props:{widgetInfo:Object},data:function(){return{}},methods:{handleSizeChange:function(e){this.pageSize=e,this.$emit("sonHandleCurrentChange",{pageSize:this.pageSize})},handleCurrentChange:function(e){this.$emit("sonHandleCurrentChange",{pageNo:e})}},mounted:function(){this.$emit("sonHandleCurrentChange",{pageSize:10,pageNo:1})}},n=l(17),component=Object(n.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-pagination",{attrs:{"current-page":this.widgetInfo.pageNo,"page-sizes":[10,15,20,25],"page-size":this.widgetInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.widgetInfo.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})],1)},[],!1,null,null,null);t.a=component.exports},592:function(e,t,l){var content=l(777);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(14).default)("44dd7bb5",content,!0,{sourceMap:!1})},593:function(e,t,l){var content=l(779);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(14).default)("62a73d12",content,!0,{sourceMap:!1})},776:function(e,t,l){"use strict";var o=l(592);l.n(o).a},777:function(e,t,l){(e.exports=l(13)(!1)).push([e.i,".record-table[data-v-17487e5c]{height:400px}.add-btn-style[data-v-17487e5c]{text-align:right;padding-right:25px;box-sizing:border-box}.list-wrap[data-v-17487e5c]{overflow:hidden}.list-wrap[data-v-17487e5c] .el-pagination{margin-top:20px}.list-wrap[data-v-17487e5c] .el-table{padding:0;overflow:hidden}.list-wrap[data-v-17487e5c] .el-table th{background:#f0f3f7}.list-wrap[data-v-17487e5c] .el-table .el-table__body-wrapper{height:calc(100vh - 489px);overflow-y:auto}.hardware-form .el-form-item[data-v-17487e5c]{width:22%;display:-webkit-inline-box;display:inline-flex;margin-right:0}.hardware-form[data-v-17487e5c]{padding-left:25px}@media screen and (max-width:1680px){.list-wrap[data-v-17487e5c] .el-table .el-table__body-wrapper{height:calc(100vh - 459px)}}",""])},778:function(e,t,l){"use strict";var o=l(593);l.n(o).a},779:function(e,t,l){(e.exports=l(13)(!1)).push([e.i,".el-scrollbar__wrap{overflow-x:hidden}",""])}}]);