(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{491:function(t,o,e){"use strict";var l=e(15),r=e(504)(5),n=!0;"find"in[]&&Array(1).find(function(){n=!1}),l(l.P+l.F*n,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),e(158)("find")},494:function(t,o,e){var content=e(542);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(14).default)("b3d79846",content,!0,{sourceMap:!1})},504:function(t,o,e){var l=e(53),r=e(157),n=e(54),c=e(41),d=e(505);t.exports=function(t,o){var e=1==t,m=2==t,f=3==t,y=4==t,k=6==t,v=5==t||k,h=o||d;return function(o,d,S){for(var D,F,w=n(o),_=r(w),C=l(d,S,3),x=c(_.length),O=0,P=e?h(o,x):m?h(o,0):void 0;x>O;O++)if((v||O in _)&&(F=C(D=_[O],O,w),t))if(e)P[O]=F;else if(F)switch(t){case 3:return!0;case 5:return D;case 6:return O;case 2:P.push(D)}else if(y)return!1;return k?-1:f||y?y:P}}},505:function(t,o,e){var l=e(506);t.exports=function(t,o){return new(l(t))(o)}},506:function(t,o,e){var l=e(18),r=e(241),n=e(6)("species");t.exports=function(t){var o;return r(t)&&("function"!=typeof(o=t.constructor)||o!==Array&&!r(o.prototype)||(o=void 0),l(o)&&null===(o=o[n])&&(o=void 0)),void 0===o?Array:o}},541:function(t,o,e){"use strict";var l=e(494);e.n(l).a},542:function(t,o,e){(t.exports=e(13)(!1)).push([t.i,".DialogStockWrap[data-v-319b2c95]{font-family:MicrosoftYaHei}.DialogStockWrap .panel-wrap[data-v-319b2c95]{margin-top:16px}.DialogStockWrap .panel-wrap .dialog-h3[data-v-319b2c95]{font-size:18px;color:#25282e;font-weight:400;padding:12px 0;border-bottom:1px solid #e1e5eb}.DialogStockWrap .panel-wrap[data-v-319b2c95] .el-form--label-top .el-form-item-first{margin-bottom:0}.DialogStockWrap .panel-wrap[data-v-319b2c95] .el-form--label-top .el-form-item__label{padding:0;color:#525c66;font-size:16px}.DialogStockWrap .panel-wrap[data-v-319b2c95] .el-form--label-top .el-radio__label{font-size:16px;font-weight:400}.DialogStockWrap .panel-wrap[data-v-319b2c95] .el-form--label-top .el-select{width:100%}.list-wrap[data-v-319b2c95]{margin-top:12px}.list-wrap[data-v-319b2c95] .el-table{padding:0;overflow:hidden}.list-wrap[data-v-319b2c95] .el-table th{background:#f0f3f7}.list-wrap[data-v-319b2c95] .el-table .el-table__body-wrapper{overflow-y:auto}",""])},584:function(t,o,e){"use strict";e.r(o);e(491),e(2),e(3),e(4),e(5);var l={data:function(){return{userObj:{},number:null,fullscreenLoading:!1,clickModalFlag:!1,dialogOutStockVisible:!1,labelPosition:"top",outStockFormData:{applyType:0,applyProject:"",applyPerson:"",orgCode:"",applyOrg:"",applyUnit:""},orgList:[],unitList:[],applyTypeList:[{value:0,label:"运营中心"},{value:1,label:"企业"},{value:2,label:"其它"}],tableData:[],rules:{applyPerson:[{required:!0,message:"申请人不能为空",trigger:"blur"}],orgCode:[{required:!0,message:"运营中心不能为空",trigger:"change"}],applyProject:[{required:!0,message:"申请项目不能为空",trigger:"change"}]}}},mounted:function(){this.getAllOrgInfo(),this.userObj=this._Storage.getObj("userObj","userObj")},computed:{},methods:{initOutStock:function(param){var t=this;t.tableData=param,t.number=t.tableData.length,t.dialogOutStockVisible=!0,t.outStockFormData={applyType:0,applyProject:"",applyPerson:"",orgCode:"",applyUnit:""},t.$nextTick(function(){t.$refs.outStockFormData.resetFields()})},getAllOrgInfo:function(){var t=this;t.$axios.$GET({api_name:"getAllOrgInfo"}).then(function(o){"success"==o.data.code&&(t.orgList=o.data.data)})},getUnitInfoByOrgCode:function(t){var o=this;o.unitList=[],o.outStockFormData.applyUnit=null,o.$axios.$GET({api_name:"getUnitInfoByOrgCode",params:{orgCode:t}}).then(function(t){"success"==t.data.code&&(o.unitList=t.data.data)})},showButton:function(t,o){return 0===o&&(this.outStockFormData.applyProject=""),1!==o&&2!==o||(this.outStockFormData.orgCode="",this.outStockFormData.applyUnit=""),t.indexOf(1*o)>-1},submitHandel:function(){var t=this,o=this,e=null;o.$refs.outStockFormData.validate(function(l){if(!l)return console.log("error submit!!"),!1;o.fullscreenLoading=!0;var r=[];o.tableData.forEach(function(t){r.push(t.deviceId)}),o.outStockFormData.orgCode&&(o.outStockFormData.applyOrg=o.orgList.find(function(t){return t.orgCode==o.outStockFormData.orgCode}).orgName),o.outStockFormData.applyUnit&&(e=o.unitList.find(function(t){return t.unitId==o.outStockFormData.applyUnit}).unitName),o.$axios.$POST({api_name:"putOutRepository",params:{applyType:o.outStockFormData.applyType,applyPerson:o.outStockFormData.applyPerson,applyOrg:o.outStockFormData.applyOrg,orgCode:o.outStockFormData.orgCode,applyUnit:e,applyProject:o.outStockFormData.applyProject,deviceIds:r.join(","),userId:o.userObj.id,userName:o.userObj.userName}}).then(function(t){o.fullscreenLoading=!1,"success"==t.data.code?(o.isLoading=!1,o.dialogOutStockVisible=!1,o.$message({message:t.data.rspMsg,type:"success"}),o.$emit("sureHandel")):(o.fullscreenLoading=!1,o.$message.error(t.data.rspMsg))}).catch(function(){t.$message({message:"这里是异常",type:"warning"})})})},cancelHandel:function(){this.outStockFormData={applyType:0,applyProject:"",applyPerson:"",orgCode:"",applyUnit:""},this.dialogOutStockVisible=!1},changeTipsClose:function(){var t=this;t.dialogVisible=!1,t.$nextTick(function(){t.$refs.outStockFormData.resetFields()})}}},r=(e(541),e(17)),component=Object(r.a)(l,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"DialogStockWrap"},[e("el-dialog",{attrs:{title:"出库",width:"768px",visible:t.dialogOutStockVisible,"close-on-click-modal":t.clickModalFlag,"close-on-press-escape":t.clickModalFlag},on:{"update:visible":function(o){t.dialogOutStockVisible=o}}},[e("div",{staticClass:"stock-mian"},[e("div",{staticClass:"panel-wrap"},[e("h4",{staticClass:"dialog-h3"},[t._v("申请信息")]),t._v(" "),e("el-form",{ref:"outStockFormData",attrs:{rules:t.rules,"label-position":t.labelPosition,model:t.outStockFormData,"label-width":"80px"}},[e("el-form-item",{staticClass:"el-form-item-first",attrs:{label:"申请类型:",required:""}},[e("el-radio-group",{on:{change:t.changeTipsClose},model:{value:t.outStockFormData.applyType,callback:function(o){t.$set(t.outStockFormData,"applyType",o)},expression:"outStockFormData.applyType"}},t._l(t.applyTypeList,function(o){return e("el-radio",{key:o.value,attrs:{label:o.value}},[t._v(t._s(o.label))])}),1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[t.showButton([0,1,2],t.outStockFormData.applyType)?e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"申请人:",prop:"applyPerson"}},[e("el-input",{attrs:{placeholder:"申请人"},model:{value:t.outStockFormData.applyPerson,callback:function(o){t.$set(t.outStockFormData,"applyPerson",o)},expression:"outStockFormData.applyPerson"}})],1)],1):t._e(),t._v(" "),t.showButton([0],t.outStockFormData.applyType)?e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"运营中心:",prop:"orgCode"}},[e("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{change:t.getUnitInfoByOrgCode},model:{value:t.outStockFormData.orgCode,callback:function(o){t.$set(t.outStockFormData,"orgCode",o)},expression:"outStockFormData.orgCode"}},t._l(t.orgList,function(t){return e("el-option",{key:t.orgCode,attrs:{label:t.orgName,value:t.orgCode}})}),1)],1)],1):t._e(),t._v(" "),t.showButton([0],t.outStockFormData.applyType)?e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"申请单位:",prop:"applyUnit"}},[e("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:t.outStockFormData.applyUnit,callback:function(o){t.$set(t.outStockFormData,"applyUnit",o)},expression:"outStockFormData.applyUnit"}},t._l(t.unitList,function(t){return e("el-option",{key:t.unitId,attrs:{label:t.unitName,value:t.unitId}})}),1)],1)],1):t._e(),t._v(" "),t.showButton([1],t.outStockFormData.applyType)?e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"申请项目:",prop:"applyProject"}},[e("el-input",{attrs:{placeholder:"申请项目"},model:{value:t.outStockFormData.applyProject,callback:function(o){t.$set(t.outStockFormData,"applyProject",o)},expression:"outStockFormData.applyProject"}})],1)],1):t._e(),t._v(" "),t.showButton([2],t.outStockFormData.applyType)?e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"申请项目:",prop:""}},[e("el-input",{attrs:{placeholder:"申请项目"},model:{value:t.outStockFormData.applyProject,callback:function(o){t.$set(t.outStockFormData,"applyProject",o)},expression:"outStockFormData.applyProject"}})],1)],1):t._e()],1)],1)],1),t._v(" "),e("div",{staticClass:"panel-wrap"},[e("h4",{staticClass:"dialog-h3"},[t._v("出库硬件列表("+t._s(t.number)+")")]),t._v(" "),e("div",{staticClass:"list-wrap"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"","max-height":"200px"}},[e("el-table-column",{attrs:{prop:"deviceId",label:"硬件Id","min-width":"10%"}}),t._v(" "),e("el-table-column",{attrs:{prop:"deviceName",label:"硬件名称","min-width":"15%"}}),t._v(" "),e("el-table-column",{attrs:{prop:"deviceTypeName",label:"硬件类型","min-width":"15%"}}),t._v(" "),e("el-table-column",{attrs:{prop:"factory",label:"厂家","min-width":"10%"}}),t._v(" "),e("el-table-column",{attrs:{prop:"brand",label:"品牌型号","min-width":"10%"}})],1)],1)])]),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(o){return t.cancelHandel()}}},[t._v("取 消")]),t._v(" "),e("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(o){return t.submitHandel()}}},[t._v("确 定")])],1)])],1)},[],!1,null,"319b2c95",null);o.default=component.exports}}]);