(window.webpackJsonp=window.webpackJsonp||[]).push([[18,17,19],{1161:function(e,t,o){"use strict";o.r(t);o(244),o(245),o(28),o(491),o(2),o(3),o(4),o(5);var l=o(478),r=o(584),n=o(763),c=o(586),d=o(585),f=o(26),m=o(52),v=o.n(m),h={components:{Pagination:l.a,OutStock:r.default,InStock:n.default,SetupInfo:d.default,TipsDiglog:c.default},data:function(){return{qrCord:null,dialogReurnVisible:!1,dialogDelVisible:!1,dialogQrcodeVisible:!1,optTitle:null,labelPosition:"top",isLoading:!1,hardwareTypeId:null,optMode:null,formData:{deviceId:"",deviceName:"",brand:"",repStatus:"",deviceSysVal:"00000000",device:"00000000",deviceTypeCodes:"",applyStatus:"",applyerPerson:"",applyProject:"",orgCode:"",unitId:""},deviceSys:[{value:"00000000",label:"全部"}],optsTemp:[{value:"00000000",label:"全部"}],hardwareTypeTreeList:[],tableData:[],parentTypeNameList:[],loading:!0,plan:{},widgetInfo:{pageSize:10,pageNo:1,total:0},repStsList:[{value:0,label:"已入库",text:"已入库"},{value:1,label:"已出库",text:"已出库"},{value:2,label:"已销库",text:"已销库"}],applyTypeList:[{value:"0",label:"运营中心"},{value:"1",label:"企业"},{value:"2",label:"其它"}],rules:{parentCode:[{required:!0,message:"请选择父类型",trigger:"change"}],typeName:[{required:!0,message:"硬件类型不能为空",trigger:"blur"},{min:1,max:32,message:"长度在 1 到 32 个字符",trigger:"blur"}],code:[{required:!0,message:"硬件code不能为空",trigger:"blur"},{min:1,max:32,message:"长度在 1 到 32 个字符",trigger:"blur"}]},checkAll:!1,isIndeterminate:!1,qrcodeObj:{},multipleSelection:[],multipleSelectionAll:[],idKey:"deviceId",azDeviceId:null,message:{setType:"",deviceId:""}}},created:function(){},mounted:function(){this.getHardwareTypeTree()},computed:{},methods:{tipsHandel:function(e){for(var t=this.idKey,i=0;i<this.multipleSelectionAll.length;i++)if(this.multipleSelectionAll[i][t]==e.deviceId){this.multipleSelectionAll.splice(i,1);break}this.getDeviceRepositoryPage("load")},inStock:function(){this.$refs.inStock.initInStock()},outStockHandel:function(){this.multipleSelection=[],this.multipleSelectionAll=[],this.getDeviceRepositoryPage("search")},sellingStock:function(e,t){this.message.setType="destroy",this.message.deviceId=t.deviceId,this.$refs.tipDiloag.showDialog(e,t)},returnStock:function(e,t){this.message.setType="back",this.message.deviceId=t.deviceId,this.$refs.tipDiloag.showDialog(e,t)},getHardwareTypeTree:function(){var e=this;e.$axios.$GET({api_name:"getHardwareTypeTree"}).then(function(t){"success"==t.data.code&&(e.hardwareTypeTreeList=t.data.data,null!=e.hardwareTypeTreeList&&e.hardwareTypeTreeList.length>0&&e.hardwareTypeTreeList.forEach(function(t){var o={};o.label=t.typeName,o.value=t.code,e.deviceSys.push(o)}))})},getChildrenHardwareType:function(e){var t=this;if(t.optsTemp=[{value:"00000000",label:"全部"}],t.formData.device=t.optsTemp[0].value,"00000000"!==e){if(null!=t.hardwareTypeTreeList&&t.hardwareTypeTreeList.length>0)for(var i=0;i<t.hardwareTypeTreeList.length;i++)if(e===t.hardwareTypeTreeList[i].code){var o=t.hardwareTypeTreeList[i].children;null!=o&&o.length>0&&function(){var e=[];o.forEach(function(o){var l={};l.label=o.typeName,l.value=o.code,t.optsTemp.push(l),e.push(o.code)}),t.formData.deviceTypeCodes=e.join(",")}();break}}else t.formData.deviceTypeCodes=""},setHardwareTypeValue:function(e){var t=this;if("00000000"===e){if(null!=t.hardwareTypeTreeList&&t.hardwareTypeTreeList.length>0)for(var i=0;i<t.hardwareTypeTreeList.length;i++)if(t.formData.deviceSysVal===t.hardwareTypeTreeList[i].code){var o=t.hardwareTypeTreeList[i].children;null!=o&&o.length>0&&function(){var e=[];o.forEach(function(t){e.push(t.code)}),t.formData.deviceTypeCodes=e.join(",")}();break}}else t.formData.deviceTypeCodes=e},showLabel:function(e,t){return""===e||null==e?"--":t.find(function(t){return t.value==e}).label},getDeviceRepositoryPage:function(e){var t=this,o=this;o.isLoading=!0,"search"==e&&(o.widgetInfo.pageNo=1),o.$axios.$POST({api_name:"getDeviceRepositoryPage",params:{deviceId:o.formData.deviceId,deviceName:o.formData.deviceName,deviceTypeCodes:o.formData.deviceTypeCodes,brand:o.formData.brand,repositoryStatus:o.formData.repStatus,applyStatus:o.formData.applyStatus,applyerPerson:o.formData.applyerPerson,applyProject:o.formData.applyProject,orgCode:o.formData.orgCode,unitId:o.formData.unitId,pageNo:o.widgetInfo.pageNo,pageSize:o.widgetInfo.pageSize}}).then(function(e){if(o.isLoading=!1,"success"==e.data.code){var l=e.data.data;o.tableData=l.rows,o.widgetInfo.total=null===l.total?0:l.total,setTimeout(function(){t.setSelectRow()},50)}else o.tableData=[],o.widgetInfo.list=data.rows,o.widgetInfo.total=0,console.log("没有数值。。。。。")}).catch(function(){console.log("这里是异常")})},sonHandleCurrentChange:function(e){this.widgetInfo.pageSize=e.pageSize?parseInt(e.pageSize):this.widgetInfo.pageSize,this.widgetInfo.pageNo=e.pageNo?parseInt(e.pageNo):this.widgetInfo.pageNo,this.changePageCoreRecordData(),this.getDeviceRepositoryPage("load")},reset:function(){this.formData={},this.getDeviceRepositoryPage("search")},viewEcode:function(e,t){this.dialogQrcodeVisible=!0,this.qrCord=t.deviceId.toString()},setupInfo:function(e,t){this.azDeviceId=t.deviceId,this.$refs.stepInfo.initStupInfo(this.azDeviceId)},handleSelectionChange:function(e){var t=this;t.multipleSelection=e,setTimeout(function(){t.changePageCoreRecordData()},50)},selectInit:function(e){return 1!=e.repStatus&&2!=e.repStatus},batchOutStock:function(){null!=this.multipleSelectionAll&&0!=this.multipleSelectionAll.length?this.$refs.outStock.initOutStock(this.multipleSelectionAll):this.$message.error("请勾选出库列")},batchExportOutStock:function(){var e=[];if(null!=this.tableData&&0!=this.tableData.length){this.tableData.forEach(function(t){e.push(t.deviceId)});var param={deviceId:this.formData.deviceId,deviceName:this.formData.deviceName,deviceTypeCodes:this.formData.deviceTypeCodes,brand:this.formData.brand,repositoryStatus:this.formData.repStatus,applyStatus:this.formData.applyStatus,applyerPerson:this.formData.applyerPerson,applyProject:this.formData.applyProject,orgCode:this.formData.orgCode,unitId:this.formData.unitId},t=v.a.stringify(param),o="/gsafetyclound"+f.a.api.downloadDeviceRepositoryExcelByConditions+"?"+t;this.$confirm("确认批量导出excel？").then(function(e){window.open(o)}).catch(function(e){})}else this.$message.error("暂时没有批量导出的数据")},setSelectRow:function(){if(this.multipleSelectionAll&&!(this.multipleSelectionAll.length<=0)){var e=this.idKey,t=[];this.multipleSelectionAll.forEach(function(o){t.push(o[e])}),this.$refs.table.clearSelection();for(var i=0;i<this.tableData.length;i++)t.indexOf(this.tableData[i][e])>=0&&this.$refs.table.toggleRowSelection(this.tableData[i],!0)}},changePageCoreRecordData:function(){var e=this,t=e.idKey;if(e.multipleSelectionAll.length<=0)e.multipleSelectionAll=e.multipleSelection;else{var o=[];e.multipleSelectionAll.forEach(function(e){o.push(e[t])});var l=[];e.multipleSelection.forEach(function(r){l.push(r[t]),o.indexOf(r[t])<0&&e.multipleSelectionAll.push(r)});var r=[];e.tableData.forEach(function(e){l.indexOf(e[t])<0&&r.push(e[t])}),r.forEach(function(l){if(o.indexOf(l)>=0)for(var i=0;i<e.multipleSelectionAll.length;i++)if(e.multipleSelectionAll[i][t]==l){e.multipleSelectionAll.splice(i,1);break}})}}}},y=(o(849),o(17)),component=Object(y.a)(h,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"Crumbs"},[o("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("硬件平台")]),e._v(" "),o("el-breadcrumb-item",[e._v("硬件库存")])],1)],1),e._v(" "),o("div",{staticClass:"main-wrap"},[o("el-row",{staticClass:"location"},[o("el-col",{attrs:{span:12}},[o("h3",[e._v("硬件库存")])]),e._v(" "),o("el-col",{staticClass:"add-btn-style",attrs:{span:12}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-download",disabled:0==e.tableData.length},on:{click:e.batchExportOutStock}},[e._v("批量导出excel")]),e._v(" "),o("el-button",{attrs:{type:"success",icon:"el-icon-upload2"},on:{click:e.inStock}},[e._v("入库")])],1)],1),e._v(" "),o("div",{staticClass:"main-container"},[o("el-form",{ref:"formData",staticClass:"hardware-form",attrs:{inline:!0,model:e.formData}},[o("el-form-item",{attrs:{label:"硬件ID:","label-width":"70px"}},[o("el-input",{attrs:{placeholder:"请输入硬件ID"},model:{value:e.formData.deviceId,callback:function(t){e.$set(e.formData,"deviceId",t)},expression:"formData.deviceId"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"硬件名称:","label-width":"95px"}},[o("el-input",{attrs:{placeholder:"请输入硬件名称"},model:{value:e.formData.deviceName,callback:function(t){e.$set(e.formData,"deviceName",t)},expression:"formData.deviceName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"硬件父类:","label-width":"95px"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getChildrenHardwareType},model:{value:e.formData.deviceSysVal,callback:function(t){e.$set(e.formData,"deviceSysVal","string"==typeof t?t.trim():t)},expression:"formData.deviceSysVal"}},e._l(e.deviceSys,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"硬件子类:","label-width":"95px"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:e.setHardwareTypeValue},model:{value:e.formData.device,callback:function(t){e.$set(e.formData,"device","string"==typeof t?t.trim():t)},expression:"formData.device"}},e._l(e.optsTemp,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"品牌:","label-width":"65px"}},[o("el-input",{attrs:{placeholder:"品牌"},model:{value:e.formData.brand,callback:function(t){e.$set(e.formData,"brand",t)},expression:"formData.brand"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"存管状态:","label-width":"95px"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.formData.repStatus,callback:function(t){e.$set(e.formData,"repStatus",t)},expression:"formData.repStatus"}},e._l(e.repStsList,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"最后申请人:","label-width":"100px"}},[o("el-input",{attrs:{placeholder:"请输入最后申请人"},model:{value:e.formData.applyerPerson,callback:function(t){e.$set(e.formData,"applyerPerson",t)},expression:"formData.applyerPerson"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"最后申请类型:","label-width":"120px"}},[o("el-input",{attrs:{placeholder:"最后申请类型"},model:{value:e.formData.applyStatus,callback:function(t){e.$set(e.formData,"applyStatus",t)},expression:"formData.applyStatus"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"最后申请项目:","label-width":"120px"}},[o("el-input",{attrs:{placeholder:"请输入最后申请项目"},model:{value:e.formData.applyProject,callback:function(t){e.$set(e.formData,"applyProject",t)},expression:"formData.applyProject"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"最后申请运营中心:","label-width":"145px"}},[o("el-input",{attrs:{placeholder:"请输入最后申请运营中心"},model:{value:e.formData.orgCode,callback:function(t){e.$set(e.formData,"orgCode",t)},expression:"formData.orgCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"最后申请单位:","label-width":"115px"}},[o("el-input",{attrs:{placeholder:"请输入最后申请单位"},model:{value:e.formData.unitId,callback:function(t){e.$set(e.formData,"unitId",t)},expression:"formData.unitId"}})],1),e._v(" "),o("el-form-item",{staticStyle:{width:"140px"},attrs:{label:"","label-width":"15px"}},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getDeviceRepositoryPage("search")}}},[e._v("查询")]),e._v(" "),o("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)],1),e._v(" "),o("div",{staticClass:"list-wrap"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.isLoading,expression:"isLoading",modifiers:{lock:!0}}],ref:"table",attrs:{data:e.tableData,stripe:"","show-overflow-tooltip":""},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"45",selectable:e.selectInit}}),e._v(" "),o("el-table-column",{attrs:{label:"硬件ID",prop:"deviceId","show-overflow-tooltip":"","min-width":"6%"}}),e._v(" "),o("el-table-column",{attrs:{label:"硬件名称",prop:"deviceName","show-overflow-tooltip":"","min-width":"8%"}}),e._v(" "),o("el-table-column",{attrs:{label:"硬件类型",prop:"deviceTypeName","show-overflow-tooltip":"","min-width":"8%"}}),e._v(" "),o("el-table-column",{attrs:{label:"厂家",prop:"factory","show-overflow-tooltip":"","min-width":"8%"}}),e._v(" "),o("el-table-column",{attrs:{label:"品牌",prop:"brand","show-overflow-tooltip":"","min-width":"8%"}}),e._v(" "),o("el-table-column",{attrs:{label:"存管状态",prop:"repStatus","show-overflow-tooltip":"","min-width":"6%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticClass:"stock-p-wrap"},[e._v("\n                "+e._s(e.showLabel(t.row.repStatus,e.repStsList))+"\n              ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"最后申请信息","show-overflow-tooltip":"","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.repStatus?o("div",{staticClass:"stock-p-wrap"},[o("p",[e._v("申请类型："+e._s(e.showLabel(t.row.applyType,e.applyTypeList)))]),e._v(" "),o("p",[e._v("  申请人："+e._s(t.row.applyPerson||"--"))]),e._v(" "),0!=t.row.applyType?o("p",[e._v("申请项目："+e._s(t.row.applyProject||"--"))]):e._e(),e._v(" "),0===t.row.applyType?[o("p",[e._v("运营中心："+e._s(t.row.applyOrg||"--"))]),e._v(" "),o("p",[e._v("申请单位："+e._s(t.row.applyUnit||"--"))])]:e._e()],2):e._e(),e._v(" "),1===t.row.repStatus?o("div",{staticClass:"stock-p-wrap"},[o("p",[e._v("申请类型："+e._s(e.showLabel(t.row.applyType,e.applyTypeList)))]),e._v(" "),o("p",[e._v("  申请人："+e._s(t.row.applyPerson||"--"))]),e._v(" "),0!=t.row.applyType?o("p",[e._v("申请项目："+e._s(t.row.applyProject||"--"))]):e._e(),e._v(" "),0===t.row.applyType?[o("p",[e._v("运营中心："+e._s(t.row.applyOrg||"--"))]),e._v(" "),o("p",[e._v("申请单位："+e._s(t.row.applyUnit||"--"))])]:e._e()],2):e._e()]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":"",align:"center","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[2!=t.row.repStatus?o("el-link",{attrs:{type:"primary"},on:{click:function(o){return e.viewEcode(t.$index,t.row)}}},[e._v("二维码")]):e._e(),e._v(" "),1===t.row.repStatus?o("el-link",{attrs:{type:"primary"},on:{click:function(o){return e.setupInfo(t.$index,t.row)}}},[e._v("安装信息")]):e._e(),e._v(" "),1===t.row.repStatus?o("el-link",{attrs:{type:"primary"},on:{click:function(o){return e.returnStock(t.$index,t.row)}}},[e._v("回退入库")]):e._e(),e._v(" "),0===t.row.repStatus?o("el-link",{attrs:{type:"primary"},on:{click:function(o){return e.sellingStock(t.$index,t.row)}}},[e._v("销库")]):e._e()]}}])})],1),e._v(" "),o("div",{staticClass:"page-footer"},[o("div",{staticClass:"pf-left"},[o("span",{staticClass:"span-yx"},[e._v("已选("+e._s(e.multipleSelectionAll.length)+")")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"mini",disabled:0==e.multipleSelectionAll.length},on:{click:e.batchOutStock}},[e._v("批量出库")])],1),e._v(" "),o("div",{staticClass:"pf-right"},[o("Pagination",{attrs:{widgetInfo:e.widgetInfo},on:{sonHandleCurrentChange:e.sonHandleCurrentChange}})],1)])],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"二维码",visible:e.dialogQrcodeVisible,width:"300px"},on:{"update:visible":function(t){e.dialogQrcodeVisible=t}}},[o("qriously",{attrs:{value:e.qrCord,size:260}})],1),e._v(" "),o("div",{staticStyle:{display:"none"},attrs:{id:"qrcode"}}),e._v(" "),o("out-stock",{ref:"outStock",on:{sureHandel:e.outStockHandel}}),e._v(" "),o("in-stock",{ref:"inStock",on:{sureHandel:e.outStockHandel}}),e._v(" "),o("setup-info",{ref:"stepInfo"}),e._v(" "),o("tips-diglog",{ref:"tipDiloag",attrs:{message:e.message},on:{loadData:e.tipsHandel}})],1)},[],!1,null,"36ad9cae",null);t.default=component.exports},478:function(e,t,o){"use strict";o(2),o(3),o(4),o(5);var l={props:{widgetInfo:Object},data:function(){return{}},methods:{handleSizeChange:function(e){this.pageSize=e,this.$emit("sonHandleCurrentChange",{pageSize:this.pageSize})},handleCurrentChange:function(e){this.$emit("sonHandleCurrentChange",{pageNo:e})}},mounted:function(){this.$emit("sonHandleCurrentChange",{pageSize:10,pageNo:1})}},r=o(17),component=Object(r.a)(l,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-pagination",{attrs:{"current-page":this.widgetInfo.pageNo,"page-sizes":[10,15,20,25],"page-size":this.widgetInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.widgetInfo.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})],1)},[],!1,null,null,null);t.a=component.exports},494:function(e,t,o){var content=o(542);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(14).default)("b3d79846",content,!0,{sourceMap:!1})},495:function(e,t,o){var content=o(544);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(14).default)("42d41093",content,!0,{sourceMap:!1})},496:function(e,t,o){var content=o(546);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(14).default)("38c30efe",content,!0,{sourceMap:!1})},541:function(e,t,o){"use strict";var l=o(494);o.n(l).a},542:function(e,t,o){(e.exports=o(13)(!1)).push([e.i,".DialogStockWrap[data-v-319b2c95]{font-family:MicrosoftYaHei}.DialogStockWrap .panel-wrap[data-v-319b2c95]{margin-top:16px}.DialogStockWrap .panel-wrap .dialog-h3[data-v-319b2c95]{font-size:18px;color:#25282e;font-weight:400;padding:12px 0;border-bottom:1px solid #e1e5eb}.DialogStockWrap .panel-wrap[data-v-319b2c95] .el-form--label-top .el-form-item-first{margin-bottom:0}.DialogStockWrap .panel-wrap[data-v-319b2c95] .el-form--label-top .el-form-item__label{padding:0;color:#525c66;font-size:16px}.DialogStockWrap .panel-wrap[data-v-319b2c95] .el-form--label-top .el-radio__label{font-size:16px;font-weight:400}.DialogStockWrap .panel-wrap[data-v-319b2c95] .el-form--label-top .el-select{width:100%}.list-wrap[data-v-319b2c95]{margin-top:12px}.list-wrap[data-v-319b2c95] .el-table{padding:0;overflow:hidden}.list-wrap[data-v-319b2c95] .el-table th{background:#f0f3f7}.list-wrap[data-v-319b2c95] .el-table .el-table__body-wrapper{overflow-y:auto}",""])},543:function(e,t,o){"use strict";var l=o(495);o.n(l).a},544:function(e,t,o){(e.exports=o(13)(!1)).push([e.i,".DialogStockWrap[data-v-50071b8a]{font-family:MicrosoftYaHei}.DialogStockWrap .stepInfo-wrap[data-v-50071b8a]{margin:5px 0}.DialogStockWrap .stepInfo-wrap .stepInfo-p[data-v-50071b8a]{font-size:16px;line-height:32px;font-family:MicrosoftYaHei}.DialogStockWrap .stepInfo-wrap .stepInfo-p .title[data-v-50071b8a]{color:#a5adb8}.DialogStockWrap .stepInfo-wrap .stepInfo-p .info[data-v-50071b8a]{color:#25282e}",""])},545:function(e,t,o){"use strict";var l=o(496);o.n(l).a},546:function(e,t,o){(e.exports=o(13)(!1)).push([e.i,".DialogStockWrap[data-v-2f167b0a]{font-family:MicrosoftYaHei}",""])},584:function(e,t,o){"use strict";o.r(t);o(491),o(2),o(3),o(4),o(5);var l={data:function(){return{userObj:{},number:null,fullscreenLoading:!1,clickModalFlag:!1,dialogOutStockVisible:!1,labelPosition:"top",outStockFormData:{applyType:0,applyProject:"",applyPerson:"",orgCode:"",applyOrg:"",applyUnit:""},orgList:[],unitList:[],applyTypeList:[{value:0,label:"运营中心"},{value:1,label:"企业"},{value:2,label:"其它"}],tableData:[],rules:{applyPerson:[{required:!0,message:"申请人不能为空",trigger:"blur"}],orgCode:[{required:!0,message:"运营中心不能为空",trigger:"change"}],applyProject:[{required:!0,message:"申请项目不能为空",trigger:"change"}]}}},mounted:function(){this.getAllOrgInfo(),this.userObj=this._Storage.getObj("userObj","userObj")},computed:{},methods:{initOutStock:function(param){var e=this;e.tableData=param,e.number=e.tableData.length,e.dialogOutStockVisible=!0,e.outStockFormData={applyType:0,applyProject:"",applyPerson:"",orgCode:"",applyUnit:""},e.$nextTick(function(){e.$refs.outStockFormData.resetFields()})},getAllOrgInfo:function(){var e=this;e.$axios.$GET({api_name:"getAllOrgInfo"}).then(function(t){"success"==t.data.code&&(e.orgList=t.data.data)})},getUnitInfoByOrgCode:function(e){var t=this;t.unitList=[],t.outStockFormData.applyUnit=null,t.$axios.$GET({api_name:"getUnitInfoByOrgCode",params:{orgCode:e}}).then(function(e){"success"==e.data.code&&(t.unitList=e.data.data)})},showButton:function(e,t){return 0===t&&(this.outStockFormData.applyProject=""),1!==t&&2!==t||(this.outStockFormData.orgCode="",this.outStockFormData.applyUnit=""),e.indexOf(1*t)>-1},submitHandel:function(){var e=this,t=this,o=null;t.$refs.outStockFormData.validate(function(l){if(!l)return console.log("error submit!!"),!1;t.fullscreenLoading=!0;var r=[];t.tableData.forEach(function(e){r.push(e.deviceId)}),t.outStockFormData.orgCode&&(t.outStockFormData.applyOrg=t.orgList.find(function(e){return e.orgCode==t.outStockFormData.orgCode}).orgName),t.outStockFormData.applyUnit&&(o=t.unitList.find(function(e){return e.unitId==t.outStockFormData.applyUnit}).unitName),t.$axios.$POST({api_name:"putOutRepository",params:{applyType:t.outStockFormData.applyType,applyPerson:t.outStockFormData.applyPerson,applyOrg:t.outStockFormData.applyOrg,orgCode:t.outStockFormData.orgCode,applyUnit:o,applyProject:t.outStockFormData.applyProject,deviceIds:r.join(","),userId:t.userObj.id,userName:t.userObj.userName}}).then(function(e){t.fullscreenLoading=!1,"success"==e.data.code?(t.isLoading=!1,t.dialogOutStockVisible=!1,t.$message({message:e.data.rspMsg,type:"success"}),t.$emit("sureHandel")):(t.fullscreenLoading=!1,t.$message.error(e.data.rspMsg))}).catch(function(){e.$message({message:"这里是异常",type:"warning"})})})},cancelHandel:function(){this.outStockFormData={applyType:0,applyProject:"",applyPerson:"",orgCode:"",applyUnit:""},this.dialogOutStockVisible=!1},changeTipsClose:function(){var e=this;e.dialogVisible=!1,e.$nextTick(function(){e.$refs.outStockFormData.resetFields()})}}},r=(o(541),o(17)),component=Object(r.a)(l,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"DialogStockWrap"},[o("el-dialog",{attrs:{title:"出库",width:"768px",visible:e.dialogOutStockVisible,"close-on-click-modal":e.clickModalFlag,"close-on-press-escape":e.clickModalFlag},on:{"update:visible":function(t){e.dialogOutStockVisible=t}}},[o("div",{staticClass:"stock-mian"},[o("div",{staticClass:"panel-wrap"},[o("h4",{staticClass:"dialog-h3"},[e._v("申请信息")]),e._v(" "),o("el-form",{ref:"outStockFormData",attrs:{rules:e.rules,"label-position":e.labelPosition,model:e.outStockFormData,"label-width":"80px"}},[o("el-form-item",{staticClass:"el-form-item-first",attrs:{label:"申请类型:",required:""}},[o("el-radio-group",{on:{change:e.changeTipsClose},model:{value:e.outStockFormData.applyType,callback:function(t){e.$set(e.outStockFormData,"applyType",t)},expression:"outStockFormData.applyType"}},e._l(e.applyTypeList,function(t){return o("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),e._v(" "),o("el-row",{attrs:{gutter:20}},[e.showButton([0,1,2],e.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"申请人:",prop:"applyPerson"}},[o("el-input",{attrs:{placeholder:"申请人"},model:{value:e.outStockFormData.applyPerson,callback:function(t){e.$set(e.outStockFormData,"applyPerson",t)},expression:"outStockFormData.applyPerson"}})],1)],1):e._e(),e._v(" "),e.showButton([0],e.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"运营中心:",prop:"orgCode"}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{change:e.getUnitInfoByOrgCode},model:{value:e.outStockFormData.orgCode,callback:function(t){e.$set(e.outStockFormData,"orgCode",t)},expression:"outStockFormData.orgCode"}},e._l(e.orgList,function(e){return o("el-option",{key:e.orgCode,attrs:{label:e.orgName,value:e.orgCode}})}),1)],1)],1):e._e(),e._v(" "),e.showButton([0],e.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"申请单位:",prop:"applyUnit"}},[o("el-select",{attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.outStockFormData.applyUnit,callback:function(t){e.$set(e.outStockFormData,"applyUnit",t)},expression:"outStockFormData.applyUnit"}},e._l(e.unitList,function(e){return o("el-option",{key:e.unitId,attrs:{label:e.unitName,value:e.unitId}})}),1)],1)],1):e._e(),e._v(" "),e.showButton([1],e.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"申请项目:",prop:"applyProject"}},[o("el-input",{attrs:{placeholder:"申请项目"},model:{value:e.outStockFormData.applyProject,callback:function(t){e.$set(e.outStockFormData,"applyProject",t)},expression:"outStockFormData.applyProject"}})],1)],1):e._e(),e._v(" "),e.showButton([2],e.outStockFormData.applyType)?o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"申请项目:",prop:""}},[o("el-input",{attrs:{placeholder:"申请项目"},model:{value:e.outStockFormData.applyProject,callback:function(t){e.$set(e.outStockFormData,"applyProject",t)},expression:"outStockFormData.applyProject"}})],1)],1):e._e()],1)],1)],1),e._v(" "),o("div",{staticClass:"panel-wrap"},[o("h4",{staticClass:"dialog-h3"},[e._v("出库硬件列表("+e._s(e.number)+")")]),e._v(" "),o("div",{staticClass:"list-wrap"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","max-height":"200px"}},[o("el-table-column",{attrs:{prop:"deviceId",label:"硬件Id","min-width":"10%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deviceName",label:"硬件名称","min-width":"15%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deviceTypeName",label:"硬件类型","min-width":"15%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"factory",label:"厂家","min-width":"10%"}}),e._v(" "),o("el-table-column",{attrs:{prop:"brand",label:"品牌型号","min-width":"10%"}})],1)],1)])]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){return e.cancelHandel()}}},[e._v("取 消")]),e._v(" "),o("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary"},on:{click:function(t){return e.submitHandel()}}},[e._v("确 定")])],1)])],1)},[],!1,null,"319b2c95",null);t.default=component.exports},585:function(e,t,o){"use strict";o.r(t);o(2),o(3),o(4),o(5);var l={data:function(){return{dialogSetupInfoVisible:!1,stepInfo:{org_name:"",install_address:"",unit_name:"",serial_number:"",create_time:"",update_time:""}}},mounted:function(){},computed:{},methods:{initStupInfo:function(e){var t=this;t.dialogSetupInfoVisible=!0,t.isLoading=!0,t.$axios.$POST({api_name:"findDeviceInfoByDeviceId",params:{deviceId:e}}).then(function(e){if(t.isLoading=!1,"success"==e.data.code){var data=e.data.data[0];t.stepInfo=data}else t.$message.error("获取参数失败")}).catch(function(e){t.$message.error(e)})}}},r=(o(543),o(17)),component=Object(r.a)(l,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"DialogStockWrap"},[o("el-dialog",{attrs:{title:"安装信息",visible:e.dialogSetupInfoVisible,width:"524px"},on:{"update:visible":function(t){e.dialogSetupInfoVisible=t}}},[o("div",{staticClass:"stock-mian"},[o("div",{staticClass:"stepInfo-wrap"},[o("p",{staticClass:"stepInfo-p"},[o("span",{staticClass:"title"},[e._v("运营中心：")]),o("span",{staticClass:"info"},[e._v(e._s(e.stepInfo.org_name||"--"))])]),e._v(" "),o("p",{staticClass:"stepInfo-p"},[o("span",{staticClass:"title"},[e._v("安装单位：")]),o("span",{staticClass:"info"},[e._v(e._s(e.stepInfo.unit_name||"--"))])]),e._v(" "),o("p",{staticClass:"stepInfo-p"},[o("span",{staticClass:"title"},[e._v("安装位置：")]),o("span",{staticClass:"info"},[e._v(e._s(e.stepInfo.install_address||"--"))])]),e._v(" "),o("p",{staticClass:"stepInfo-p"},[o("span",{staticClass:"title"},[e._v("IMEI/SN/序列号：")]),o("span",{staticClass:"info"},[e._v(e._s(e.stepInfo.serial_number||"--"))])]),e._v(" "),o("p",{staticClass:"stepInfo-p"},[o("span",{staticClass:"title"},[e._v("初次安装时间：")]),o("span",{staticClass:"info"},[e._v(e._s(e.stepInfo.create_time||"--"))])]),e._v(" "),o("p",{staticClass:"stepInfo-p"},[o("span",{staticClass:"title"},[e._v("最新修改时间：")]),o("span",{staticClass:"info"},[e._v(e._s(e.stepInfo.update_time||"--"))])])])])])],1)},[],!1,null,"50071b8a",null);t.default=component.exports},586:function(e,t,o){"use strict";o.r(t);o(2),o(3),o(4),o(5);var l={data:function(){return{dialogTipsVisible:!1,isLoading:!1,userObj:{},handwareObj:{},message:{}}},mounted:function(){this.userObj=this._Storage.getObj("userObj","userObj")},computed:{},methods:{showDialog:function(e,t,o){this.handwareObj=t,this.dialogTipsVisible=!0,this.message=o},sureHandle:function(){var e=this,t=this;t.isLoading=!0;var o=null;console.log(2222,t.handwareObj),"back"==t.message.setType?o="backInToRepository":"destroy"==t.message.setType&&(o="destroyOutRepository"),t.$axios.$POST({api_name:o,params:{deviceId:t.message.deviceId,userId:t.userObj.id,userName:t.userObj.userName}}).then(function(e){t.isLoading=!1,"success"==e.data.code?(t.isLoading=!1,t.dialogTipsVisible=!1,t.$message({message:e.data.rspMsg,type:"success"}),t.$emit("loadData",t.handwareObj)):(t.isLoading=!1,t.$message.error(e.data.rspMsg))}).catch(function(){e.$message({message:"这里是异常",type:"warning"})})},cancalHandle:function(){this.dialogTipsVisible=!1,this.$message("取消操作")}}},r=(o(545),o(17)),component=Object(r.a)(l,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"DialogStockWrap"},[o("el-dialog",{attrs:{"custom-class":"del-dialog-wrap",visible:e.dialogTipsVisible,width:"280px"},on:{"update:visible":function(t){e.dialogTipsVisible=t}}},[o("div",{staticClass:"del-dialog-main"},[o("div",{staticClass:"icon-wrap"},[o("i",{staticClass:"el-icon-s-opportunity"})]),e._v(" "),"destroy"==e.message.setType?o("div",{staticClass:"p-wrap"},[o("p",{staticClass:"title-p"},[e._v("是否确定销库？")]),e._v(" "),o("p",{staticClass:"tips-p"},[e._v("销库后将不可恢复")])]):"back"==e.message.setType?o("div",{staticClass:"p-wrap"},[o("p",{staticClass:"title-p"},[e._v("是否确定回退入库？")]),e._v(" "),o("p",{staticClass:"tips-p"},[e._v("回退入库后将不可恢复")])]):e._e()]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.sureHandle}},[e._v("确 定")]),e._v(" "),o("el-button",{on:{click:e.cancalHandle}},[e._v("取 消")])],1)])],1)},[],!1,null,"2f167b0a",null);t.default=component.exports},641:function(e,t,o){var content=o(850);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(14).default)("92547546",content,!0,{sourceMap:!1})},849:function(e,t,o){"use strict";var l=o(641);o.n(l).a},850:function(e,t,o){(e.exports=o(13)(!1)).push([e.i,".add-btn-style[data-v-36ad9cae]{text-align:right;padding-right:25px;box-sizing:border-box}.hardware-form[data-v-36ad9cae]{padding:20px 25px 0}.hardware-form[data-v-36ad9cae] .el-form-item{margin-right:0}.hardware-form[data-v-36ad9cae] .el-form-item .el-form-item__content{width:170px}.list-wrap[data-v-36ad9cae]{height:calc(100vh - 371px);overflow:hidden}.list-wrap[data-v-36ad9cae] .el-table{padding:0;overflow:hidden}.list-wrap[data-v-36ad9cae] .el-table th{background:#f0f3f7}.list-wrap[data-v-36ad9cae] .el-table .el-table__body-wrapper{height:calc(100vh - 504px);overflow-y:auto}.page-footer[data-v-36ad9cae]{display:-webkit-box;display:flex}.page-footer .pf-left[data-v-36ad9cae]{width:450px;margin:28px 0 0 10px}.page-footer .pf-left .span-yx[data-v-36ad9cae]{width:60px;font-size:14px;color:#666;display:inline-block}.page-footer .pf-right[data-v-36ad9cae]{-webkit-box-flex:1;flex:1}@media screen and (min-width:1680px) and (max-width:1920px){.list-wrap[data-v-36ad9cae]{height:calc(100vh - 427px)}.list-wrap[data-v-36ad9cae] .el-table .el-table__body-wrapper{height:calc(100vh - 560px);overflow-y:auto}}@media screen and (min-width:1394px) and (max-width:1680px){.list-wrap[data-v-36ad9cae]{height:calc(100vh - 397px)}.list-wrap[data-v-36ad9cae] .el-table .el-table__body-wrapper{height:calc(100vh - 530px);overflow-y:auto}}@media screen and (max-width:1393px){.list-wrap[data-v-36ad9cae]{height:calc(100vh - 483px)}.list-wrap[data-v-36ad9cae] .el-table .el-table__body-wrapper{height:calc(100vh - 616px);overflow-y:auto}}",""])}}]);