(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1187:function(t,e,o){"use strict";o.r(e);o(243),o(100),o(2),o(3),o(4),o(5);var n={components:{Pagination:o(490).a},data:function(){return{flag:!1,isLoading:!1,labelWidth:"100px",formData:{DataSelect:"",beginDate:"",endDate:""},tableData:[],loading:!0,pageNo:1,pageSize:6,total:0,widgetInfo:{pageSize:6,pageNo:1,total:0},indexNum:0,userId:null,parentTypeNameList:[],plan:{},dialogVisible:!1,labelPosition:"top",optTitle:null,optMode:null,rules:{parentCode:[{required:!0,message:"不能为空",trigger:"blur"}]},center_type:[{value:"0",label:"直营"},{value:"1",label:"加盟"}],infoStatus:[{value:"",label:"请选择"},{value:"0",label:"已上线"},{value:"1",label:"未上线"}],serviceArea:[],infoSource:[{value:"",label:"全部"}],value:[],value1:[]}},created:function(){this.findInfoSource()},computed:{transformOnlineState:function(t){return function(t){return 0==t?"已上线":1==t?"未上线":void 0}},transformPublishWay:function(t){return function(t){return"0,1,2"==t?"App,web,大屏":0==t?"App":1==t?"web":2==t?"大屏":void 0}},transformOperationType:function(t){}},methods:{findInformationList:function(){var t=this;this.isLoading=!0,this.$axios.$POST_NEW({api_name:"queryInformationList",params:{keyInput:this.formData.infoTitle,informationManageStartDate:this.formData.beginDate,informationManageEndDate:this.formData.endDate,infoStatus:this.formData.infoStatusVal,infoResource:this.formData.infoSourceVal,orgCode:"",flag:"",pageNo:this.widgetInfo.pageNo,pageSize:this.widgetInfo.pageSize}}).then(function(e){if("success"==e.data.code){t.isLoading=!1;var data=e.data.data;t.tableData=data.rows,t.widgetInfo.total=null===data.total?0:data.total}else t.tableData=[],t.widgetInfo.list=data.rows,t.widgetInfo.total=0})},sonHandleCurrentChange:function(t){this.widgetInfo.pageSize=t.pageSize?parseInt(t.pageSize):this.widgetInfo.pageSize,this.widgetInfo.pageNo=t.pageNo?parseInt(t.pageNo):this.widgetInfo.pageNo,this.findInformationList()},preview:function(t,e){console.log(t),localStorage.setItem("inforId",t.id),this.$router.push({name:"informationManager-infoDetail"})},takeDown:function(t,e){var o=this,n=this;this.$confirm("确认要下线该条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"1"!=t.isOnline?(o.isLoading=!0,o.$axios.$POST_NEW({api_name:"updateInformationStatus",params:{operationType:"3",inforId:t.id}}).then(function(t){o.isLoading=!1,o.$message.success(t.data.message),"success"==t.data.code&&n.lookFor()})):o.$message.warning("该资讯已经下线")})},upLine:function(t,e){var o=this,n=this;this.$confirm("确认要上线该条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){"0"!=t.isOnline?(o.isLoading=!0,o.$axios.$POST_NEW({api_name:"updateInformationStatus",params:{operationType:"2",inforId:t.id}}).then(function(t){o.isLoading=!1,o.$message.success(t.data.message),"success"==t.data.code&&n.lookFor()})):o.$message.warning("该资讯已经上线")})},deleteClick:function(t,e){var o=this,n=this;this._Storage.getObj("userObj","userObj").id;this.$confirm("确认要删除该条数据吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.isLoading=!0,o.$axios.$POST_NEW({api_name:"updateInformationStatus",params:{operationType:"4",inforId:t.id}}).then(function(t){o.isLoading=!1,o.$message.success(t.data.message),"success"==t.data.code&&n.lookFor()})})},editClick:function(t,e){console.log(t),localStorage.setItem("inforId",t.id),this.$router.push({name:"informationManager-infoEdit"})},changeState:function(t){var e=this,o=this,n=this._Storage.getObj("userObj","userObj").id;this.$confirm("确认启用运营中心服务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.isLoading=!0,e.$axios.$POST_NEW({api_name:"updateOperationOrgServerStatusByOrgCode",params:{orgCode:t,updateUser:n}}).then(function(t){e.isLoading=!1,e.$message.success(t.data.message),"success"==t.data.code&&o.lookFor()})})},reset:function(t){this.$refs[t].resetFields(),this.formData.DataSelect="",this.findInformationList()},lookFor:function(){var t=this.formData.DataSelect[0],e=this.formData.DataSelect[1];this.formData.pageNo=1,Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[o]:("00"+e[o]).substr((""+e[o]).length)));return t},null!=t&&t instanceof Date&&(t=t.format("yyyy-MM-dd")),null!=e&&e instanceof Date&&(e=e.format("yyyy-MM-dd")),""==this.formData.DataSelect?(this.formData.beginDate="",this.formData.endDate=""):(this.formData.beginDate=t,this.formData.endDate=e),this.findInformationList()},handleClose:function(){var t=this;t.dialogVisible=!1,t.$nextTick(function(){t.plan={},t.$refs.plan.resetFields()})},findInfoSource:function(){var t=this;this.$axios.$POST_NEW({api_name:"queryInformationSource",params:{}}).then(function(e){if("success"==e.data.code){var o;for(var n in o=e.data.data){var l={};l.value=o[n].value,l.label=o[n].label,t.infoSource.push(l)}}else console.log("没有数值。。。。。")})},checkState:function(t){return"1"==t},handleChange:function(){console.log(JSON.stringify(this.value)),console.log(JSON.stringify(this.value1))},downloadFile:function(data){window.open("http://www.gsafetycloud.com/api/v1.1/operation-management/mainOperationOrgController/downloadAttachById?attId="+data.attachmentId)}}},l=(o(801),o(18)),component=Object(l.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"Crumbs"},[o("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",[t._v("运营中心")]),t._v(" "),o("el-breadcrumb-item",[t._v("资讯管理")])],1)],1),t._v(" "),o("div",{staticClass:"main-wrap"},[o("el-row",{staticClass:"location"},[o("el-col",{attrs:{span:12}},[o("h3",[t._v("资讯管理")])])],1),t._v(" "),o("div",{staticClass:"main-container"},[o("el-form",{ref:"formData",staticClass:"hardware-form",attrs:{inline:!0,model:t.formData}},[o("el-form-item",{attrs:{label:"资讯标题:",prop:"infoTitle","label-width":t.labelWidth}},[o("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.infoTitle,callback:function(e){t.$set(t.formData,"infoTitle","string"==typeof e?e.trim():e)},expression:"formData.infoTitle"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"资讯来源:","label-width":t.labelWidth}},[o("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.formData.infoSourceVal,callback:function(e){t.$set(t.formData,"infoSourceVal","string"==typeof e?e.trim():e)},expression:"formData.infoSourceVal"}},t._l(t.infoSource,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"资讯状态:","label-width":t.labelWidth}},[o("el-select",{attrs:{placeholder:"请选择",filterable:""},model:{value:t.formData.infoStatusVal,callback:function(e){t.$set(t.formData,"infoStatusVal","string"==typeof e?e.trim():e)},expression:"formData.infoStatusVal"}},t._l(t.infoStatus,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),o("el-form-item",{staticClass:"DataSelect",attrs:{label:"操作时间:",prop:"time","label-width":t.labelWidth}},[o("el-date-picker",{attrs:{type:"daterange","range-separator":" 至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd"},model:{value:t.formData.DataSelect,callback:function(e){t.$set(t.formData,"DataSelect","string"==typeof e?e.trim():e)},expression:"formData.DataSelect"}})],1),t._v(" "),o("el-form-item",{staticClass:"serch-btn",attrs:{label:""}},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.lookFor()}}},[t._v("查询")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.reset("formData")}}},[t._v("重置")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.addInfo()}}},[t._v("添加资讯")])],1)],1),t._v(" "),o("div",{staticClass:"list-wrap"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.isLoading,expression:"isLoading",modifiers:{lock:!0}}],attrs:{data:t.tableData,stripe:"","show-overflow-tooltip":""}},[o("el-table-column",{attrs:{label:"资讯标题",prop:"informationTitle",width:"290","show-overflow-tooltip":"",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"资讯来源",prop:"informationSource","show-overflow-tooltip":"",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"发布时间",prop:"publishDate","show-overflow-tooltip":"",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"发布对象",prop:"publishTarget","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",[t._v(t._s(t.transformPublishWay(e.row.publishTarget)))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"浏览次数",prop:"clickNum","show-overflow-tooltip":"",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{label:"状态",prop:"status","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",[t._v(t._s(t.transformOnlineState(e.row.status)))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"240","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:""},on:{click:function(o){return t.preview(e.row,e.$index)}}},[t._v("预览")]),t._v(" "),0==e.row.isOnline?o("el-button",{staticStyle:{color:"#009cff"},attrs:{type:"text",size:""},on:{click:function(o){return t.takeDown(e.row,e.$index)}}},[t._v("下线  ")]):t._e(),t._v(" "),1==e.row.isOnline?o("el-button",{staticStyle:{color:"grey"},attrs:{type:"text",size:""}},[t._v("下线  ")]):t._e(),t._v(" "),1==e.row.isOnline?o("el-button",{staticStyle:{color:"#009cff"},attrs:{type:"text",size:""},on:{click:function(o){return t.upLine(e.row,e.$index)}}},[t._v("上线  ")]):t._e(),t._v(" "),0==e.row.isOnline?o("el-button",{staticStyle:{color:"grey"},attrs:{type:"text",size:""}},[t._v("上线  ")]):t._e(),t._v(" "),o("el-button",{attrs:{type:"text",size:""},on:{click:function(o){return t.editClick(e.row,e.$index)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"text",size:""},on:{click:function(o){return t.deleteClick(e.row,e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("Pagination",{attrs:{widgetInfo:t.widgetInfo},on:{sonHandleCurrentChange:t.sonHandleCurrentChange}})],1)],1)],1),t._v(" "),o("el-dialog",{attrs:{title:t.optTitle,visible:t.dialogVisible,width:"1000px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("div",{staticClass:"dialog-body-diy-wrapper"},[o("el-form",{ref:"plan",staticClass:"dialog-form-style",attrs:{"label-position":t.labelPosition,"label-width":"120px",rules:t.rules,model:t.plan}},[o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"运营中心名称",prop:""}},[o("el-input",{attrs:{maxlength:"16"},model:{value:t.plan.orgName,callback:function(e){t.$set(t.plan,"orgName","string"==typeof e?e.trim():e)},expression:"plan.orgName"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"服务区域",prop:""}},[o("el-cascader",{staticStyle:{width:"100%"},attrs:{options:t.serviceArea,props:{expandTrigger:"hover",checkStrictly:!0}},on:{change:t.handleChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"运营中心类型",prop:""}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.plan.joinType,callback:function(e){t.$set(t.plan,"joinType",e)},expression:"plan.joinType"}},t._l(t.center_type,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"联系地址",prop:""}},[o("el-cascader",{staticStyle:{width:"100%"},attrs:{options:t.serviceArea,props:{expandTrigger:"hover",checkStrictly:!0}},on:{change:t.handleChange},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"详细地址",prop:""}},[o("el-input",{attrs:{maxlength:"16"},model:{value:t.plan.unitAddress,callback:function(e){t.$set(t.plan,"unitAddress","string"==typeof e?e.trim():e)},expression:"plan.unitAddress"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"联系人",prop:""}},[o("el-input",{attrs:{maxlength:"16"},model:{value:t.plan.contactPerson,callback:function(e){t.$set(t.plan,"contactPerson","string"==typeof e?e.trim():e)},expression:"plan.contactPerson"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"联系电话",prop:""}},[o("el-input",{attrs:{maxlength:"11"},model:{value:t.plan.contactPersonTel,callback:function(e){t.$set(t.plan,"contactPersonTel","string"==typeof e?e.trim():e)},expression:"plan.contactPersonTel"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"是否提供监测服务",prop:""}},[o("el-radio-group",{model:{value:t.plan.monitorServiceStatus,callback:function(e){t.$set(t.plan,"monitorServiceStatus",e)},expression:"plan.monitorServiceStatus"}},[o("el-radio",{attrs:{label:1}},[t._v("是")]),t._v(" "),o("el-radio",{attrs:{label:0}},[t._v("否")])],1)],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"合同上传",prop:""}},[o("el-table",{attrs:{"show-header":!1,data:t.plan.operationOrgAttachment}},[o("el-table-column",{attrs:{property:"attachmentName"}}),t._v(" "),o("el-table-column",{attrs:{width:"105"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary"},on:{click:function(o){return t.downloadFile(e.row)}}},[t._v("查看")])]}}])})],1)],1)],1)],1)],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveOrUpdateForm("plan")}}},[t._v("确 定")])],1)])],1)},[],!1,null,"0efa5f4e",null);e.default=component.exports},490:function(t,e,o){"use strict";o(2),o(3),o(4),o(5);var n={props:{widgetInfo:Object},data:function(){return{}},methods:{handleSizeChange:function(t){this.pageSize=t,this.$emit("sonHandleCurrentChange",{pageSize:this.pageSize})},handleCurrentChange:function(t){this.$emit("sonHandleCurrentChange",{pageNo:t})}},mounted:function(){this.$emit("sonHandleCurrentChange",{pageSize:10,pageNo:1})}},l=o(18),component=Object(l.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-pagination",{attrs:{"current-page":this.widgetInfo.pageNo,"page-sizes":[10,15,20,25],"page-size":this.widgetInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.widgetInfo.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})],1)},[],!1,null,null,null);e.a=component.exports},610:function(t,e,o){var content=o(802);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(10).default)("293e9050",content,!0,{sourceMap:!1})},801:function(t,e,o){"use strict";var n=o(610);o.n(n).a},802:function(t,e,o){(t.exports=o(9)(!1)).push([t.i,".list-wrap[data-v-0efa5f4e],.list-wrap[data-v-0efa5f4e] .el-table{width:100%}.list-wrap[data-v-0efa5f4e] .el-table .el-table__body-wrapper{height:calc(100vh - 430px)}.hardware-form[data-v-0efa5f4e]{font-size:0;padding:20px 20px 0}.hardware-form .el-form-item[data-v-0efa5f4e]{width:20%;display:-webkit-inline-box;display:inline-flex;margin-right:0}.hardware-form .el-form-item .el-select[data-v-0efa5f4e]{width:100%}.hardware-form .serch-btn button[data-v-0efa5f4e]:first-child{margin-left:10px}[data-v-0efa5f4e] .el-pagination{margin:0;padding-top:20px}@media screen and (max-width:1680px){.list-wrap[data-v-0efa5f4e] .el-table .el-table__body-wrapper{height:calc(100vh - 410px)}}.hardware-form .el-form-item[data-v-0efa5f4e]{width:28%}.hardware-form .el-form-item[data-v-0efa5f4e]:nth-of-type(4){width:30%}.hardware-form .el-form-item[data-v-0efa5f4e]:nth-of-type(4) .el-form-item__label{width:150px!important}.hardware-form .el-form-item[data-v-0efa5f4e]:nth-of-type(5){width:25%}.add-btn-style[data-v-0efa5f4e]{text-align:right;padding-right:25px;box-sizing:border-box}.hardware-form[data-v-0efa5f4e]{padding:20px 25px 0}.list-wrap[data-v-0efa5f4e]{height:calc(100vh - 315px);overflow:hidden}.list-wrap[data-v-0efa5f4e] .el-table{padding:0;overflow:hidden}.list-wrap[data-v-0efa5f4e] .el-table .el-button+.el-button{margin-left:0}.list-wrap[data-v-0efa5f4e] .el-table th{background:#f0f3f7}.list-wrap[data-v-0efa5f4e] .el-table .el-table__body-wrapper{height:calc(100vh - 448px);overflow-y:auto}.list-wrap[data-v-0efa5f4e] .el-table a:hover{text-decoration:none!important}",""])}}]);