(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1193:function(e,t,l){"use strict";l.r(t);l(2),l(3),l(4),l(5);var o={components:{Pagination:l(490).a},data:function(){return{flag:!1,isLoading:!1,labelWidth:"100px",formData:{},tableData:[],loading:!0,pageNo:1,pageSize:6,total:0,widgetInfo:{pageSize:6,pageNo:1,total:0},indexNum:0,userId:null,parentTypeNameList:[],plan:{},dialogVisible:!1,labelPosition:"top",optTitle:null,optMode:null,rules:{parentCode:[{required:!0,message:"不能为空",trigger:"blur"}]},center_type:[{value:"0",label:"直营"},{value:"1",label:"加盟"}],serviceArea:[],onlineStates:[],value:[],value1:[]}},created:function(){this.findUnitValue()},computed:{transformOnlineState:function(e){return function(e){return 0==e?"待启用":1==e?"已启用":void 0}},transformOnlineName:function(e){return function(e){return 0==e?"启用":1==e?"禁用":void 0}},transformOperationType:function(e){}},methods:{findMonitorDeviceStateDownList:function(){var e=this;this.isLoading=!0,this.$axios.$POST_NEW({api_name:"queryOperationOrgList",params:{orgName:this.formData.orgName,province:this.formData.province,pageNo:this.widgetInfo.pageNo,pageSize:this.widgetInfo.pageSize}}).then(function(t){if("success"==t.data.code){e.isLoading=!1;var data=t.data.data;e.tableData=data.rows,e.widgetInfo.total=null===data.total?0:data.total}else e.tableData=[],e.widgetInfo.list=data.rows,e.widgetInfo.total=0})},sonHandleCurrentChange:function(e){this.widgetInfo.pageSize=e.pageSize?parseInt(e.pageSize):this.widgetInfo.pageSize,this.widgetInfo.pageNo=e.pageNo?parseInt(e.pageNo):this.widgetInfo.pageNo,this.findMonitorDeviceStateDownList()},deleteClick:function(e){var t=this,l=this,o=this._Storage.getObj("userObj","userObj").id;this.$confirm("确认删除该运营中心?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.isLoading=!0,t.$axios.$POST_NEW({api_name:"deleteOperationOrgByOrgCode",params:{orgCode:e,updateUser:o}}).then(function(e){t.isLoading=!1,t.$message.success(e.data.message),"success"==e.data.code&&l.lookFor()})})},editClick:function(e){var t=this;t.dialogVisible=!0,t.$nextTick(function(){t.plan={},t.$refs.plan.resetFields()}),t.optTitle="编辑",t.plan={},t.$axios.$POST_NEW({api_name:"queryOperationOrgByOrgCode",params:{orgCode:e},time:3e4}).then(function(e){"success"==e.data.code?(t.plan=JSON.parse(JSON.stringify(e.data.data)),console.log("======"+t.plan.monitorServiceStatus),0==t.serviceArea.length?t.findserviceArea():(t.value.push(t.plan.province),t.value.push(t.plan.city),t.value1.push(t.plan.province),t.value1.push(t.plan.city),t.value1.push(t.plan.contactCounty)),t.$refs.plan.resetFields()):t.$message.error("获取运营中心信息失败")})},changeState:function(e){var t=this,l=this,o=this._Storage.getObj("userObj","userObj").id;this.$confirm("确认启用运营中心服务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.isLoading=!0,t.$axios.$POST_NEW({api_name:"updateOperationOrgServerStatusByOrgCode",params:{orgCode:e,updateUser:o}}).then(function(e){t.isLoading=!1,t.$message.success(e.data.message),"success"==e.data.code&&l.lookFor()})})},reset:function(){this.formData={},this.findMonitorDeviceStateDownList()},lookFor:function(){this.findMonitorDeviceStateDownList()},handleClose:function(){var e=this;e.dialogVisible=!1,e.$nextTick(function(){e.plan={},e.$refs.plan.resetFields()})},findUnitValue:function(){var e=this;this.$axios.$POST_NEW({api_name:"queryDistrictCascodeProvince",params:{}}).then(function(t){if("success"==t.data.code){var l;for(var o in l=t.data.data.data){var n={};n.value=l[o].value,n.label=l[o].label,e.onlineStates.push(n)}}else console.log("没有数值。。。。。")})},findserviceArea:function(e){var t=this;this.$axios.$POST_NEW({api_name:"queryDistrictCascode",params:{}}).then(function(e){if("success"==e.data.code){var l;for(var o in l=e.data.data){if("000000"==l[o].parentCode)(d={}).value=l[o].distCode,d.parentCode=l[o].parentCode,d.children=[],d.shortSpelling=l[o].shortSpelling,d.latitude=l[o].latitude,d.fullSpelling=l[o].fullSpelling,d.label=l[o].distName,d.sortNum=l[o].sortNum,d.distShortName=l[o].distShortName,d.isLeaf=l[o].isLeaf,d.longitude=l[o].longitude,d.distNotes=l[o].distNotes,t.serviceArea.push(d);else if(t.serviceArea.length>0)for(var n in t.serviceArea)if(l[o].parentCode==t.serviceArea[n].value){(d={}).value=l[o].distCode,d.parentCode=l[o].parentCode,d.children=[],d.shortSpelling=l[o].shortSpelling,d.latitude=l[o].latitude,d.fullSpelling=l[o].fullSpelling,d.label=l[o].distName,d.sortNum=l[o].sortNum,d.distShortName=l[o].distShortName,d.isLeaf=l[o].isLeaf,d.longitude=l[o].longitude,d.distNotes=l[o].distNotes,t.serviceArea[n].children.push(d)}else{var r=t.serviceArea[n].children;if(r.length>0)for(var c in r){var d;if(l[o].parentCode==r[c].value)(d={}).value=l[o].distCode,d.parentCode=l[o].parentCode,d.shortSpelling=l[o].shortSpelling,d.latitude=l[o].latitude,d.fullSpelling=l[o].fullSpelling,d.label=l[o].distName,d.sortNum=l[o].sortNum,d.distShortName=l[o].distShortName,d.isLeaf=l[o].isLeaf,d.longitude=l[o].longitude,d.distNotes=l[o].distNotes,r[c].children.push(d)}}}t.value.push(t.plan.province),t.value.push(t.plan.city),t.value1.push(t.plan.province),t.value1.push(t.plan.city),t.value1.push(t.plan.contactCounty)}else console.log("没有数值。。。。。")})},checkState:function(e){return"1"==e},handleChange:function(){console.log(JSON.stringify(this.value)),console.log(JSON.stringify(this.value1))},downloadFile:function(data){window.open("http://www.gsafetycloud.com/api/v1.1/operation-management/mainOperationOrgController/downloadAttachById?attId="+data.attachmentId)}}},n=(l(787),l(18)),component=Object(n.a)(o,function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",{staticClass:"Crumbs"},[l("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[l("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("企业管理")]),e._v(" "),l("el-breadcrumb-item",[e._v("运营中心管理")])],1)],1),e._v(" "),l("div",{staticClass:"main-wrap"},[l("el-row",{staticClass:"location"},[l("el-col",{attrs:{span:12}},[l("h3",[e._v("运营中心管理")])])],1),e._v(" "),l("div",{staticClass:"main-container"},[l("el-form",{ref:"formData",staticClass:"hardware-form",attrs:{inline:!0,model:e.formData}},[l("el-form-item",{attrs:{label:"运营中心:",prop:"orgName","label-width":e.labelWidth}},[l("el-input",{attrs:{placeholder:"请输入"},model:{value:e.formData.orgName,callback:function(t){e.$set(e.formData,"orgName","string"==typeof t?t.trim():t)},expression:"formData.orgName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"服务区域:","label-width":e.labelWidth}},[l("el-select",{attrs:{placeholder:"全部",filterable:""},model:{value:e.formData.province,callback:function(t){e.$set(e.formData,"province","string"==typeof t?t.trim():t)},expression:"formData.province"}},e._l(e.onlineStates,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{staticClass:"serch-btn",attrs:{label:""}},[l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.lookFor()}}},[e._v("查询")]),e._v(" "),l("el-button",{attrs:{size:"small"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1),e._v(" "),l("div",{staticClass:"list-wrap"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.isLoading,expression:"isLoading",modifiers:{lock:!0}}],attrs:{data:e.tableData,stripe:"","show-overflow-tooltip":""}},[l("el-table-column",{attrs:{label:"编号",width:"290",prop:"orgCode","show-overflow-tooltip":"",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"运营中心",prop:"orgName","show-overflow-tooltip":"",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"服务区域",prop:"","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("div",[e._v(e._s(t.row.provinceName+t.row.cityName))])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"联系人",prop:"contactPerson","show-overflow-tooltip":"",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"联系电话",prop:"contactPersonTel","show-overflow-tooltip":"",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"服务状态",prop:"","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("div",[e._v(e._s(e.transformOnlineState(t.row.serverStatus)))])]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"操作","show-overflow-tooltip":"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.checkState(t.row.serverStatus)?l("el-link",{staticStyle:{color:"#999999"},attrs:{type:"primary"}},[e._v("启用")]):e._e(),e._v(" "),e.checkState(t.row.serverStatus)?e._e():l("el-link",{attrs:{type:"primary"},on:{click:function(l){return e.changeState(t.row.orgCode)}}},[e._v("启用")]),e._v(" "),l("el-link",{attrs:{type:"primary"},on:{click:function(l){return e.editClick(t.row.orgCode)}}},[e._v("编辑")]),e._v(" "),e.checkState(t.row.serverStatus)?l("el-link",{staticStyle:{color:"#999999"},attrs:{type:"primary"}},[e._v("删除")]):e._e(),e._v(" "),e.checkState(t.row.serverStatus)?e._e():l("el-link",{attrs:{type:"primary"},on:{click:function(l){return e.deleteClick(t.row.orgCode)}}},[e._v("删除")])]}}])})],1),e._v(" "),l("Pagination",{attrs:{widgetInfo:e.widgetInfo},on:{sonHandleCurrentChange:e.sonHandleCurrentChange}})],1)],1)],1),e._v(" "),l("el-dialog",{attrs:{title:e.optTitle,visible:e.dialogVisible,width:"1000px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[l("div",{staticClass:"dialog-body-diy-wrapper"},[l("el-form",{ref:"plan",staticClass:"dialog-form-style",attrs:{"label-position":e.labelPosition,"label-width":"120px",rules:e.rules,model:e.plan}},[l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"运营中心名称",prop:""}},[l("el-input",{attrs:{maxlength:"16"},model:{value:e.plan.orgName,callback:function(t){e.$set(e.plan,"orgName","string"==typeof t?t.trim():t)},expression:"plan.orgName"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"服务区域",prop:""}},[l("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.serviceArea,props:{expandTrigger:"hover",checkStrictly:!0}},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"运营中心类型",prop:""}},[l("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.plan.joinType,callback:function(t){e.$set(e.plan,"joinType",t)},expression:"plan.joinType"}},e._l(e.center_type,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"联系地址",prop:""}},[l("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.serviceArea,props:{expandTrigger:"hover",checkStrictly:!0}},on:{change:e.handleChange},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"详细地址",prop:""}},[l("el-input",{attrs:{maxlength:"16"},model:{value:e.plan.unitAddress,callback:function(t){e.$set(e.plan,"unitAddress","string"==typeof t?t.trim():t)},expression:"plan.unitAddress"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"联系人",prop:""}},[l("el-input",{attrs:{maxlength:"16"},model:{value:e.plan.contactPerson,callback:function(t){e.$set(e.plan,"contactPerson","string"==typeof t?t.trim():t)},expression:"plan.contactPerson"}})],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"联系电话",prop:""}},[l("el-input",{attrs:{maxlength:"11"},model:{value:e.plan.contactPersonTel,callback:function(t){e.$set(e.plan,"contactPersonTel","string"==typeof t?t.trim():t)},expression:"plan.contactPersonTel"}})],1)],1),e._v(" "),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"是否提供监测服务",prop:""}},[l("el-radio-group",{model:{value:e.plan.monitorServiceStatus,callback:function(t){e.$set(e.plan,"monitorServiceStatus",t)},expression:"plan.monitorServiceStatus"}},[l("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),l("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)],1)],1),e._v(" "),l("el-row",[l("el-col",{attrs:{span:24}},[l("el-form-item",{attrs:{label:"合同上传",prop:""}},[l("el-table",{attrs:{"show-header":!1,data:e.plan.operationOrgAttachment}},[l("el-table-column",{attrs:{property:"attachmentName"}}),e._v(" "),l("el-table-column",{attrs:{width:"105"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"primary"},on:{click:function(l){return e.downloadFile(t.row)}}},[e._v("查看")])]}}])})],1)],1)],1)],1)],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveOrUpdateForm("plan")}}},[e._v("确 定")])],1)])],1)},[],!1,null,"36a99953",null);t.default=component.exports},490:function(e,t,l){"use strict";l(2),l(3),l(4),l(5);var o={props:{widgetInfo:Object},data:function(){return{}},methods:{handleSizeChange:function(e){this.pageSize=e,this.$emit("sonHandleCurrentChange",{pageSize:this.pageSize})},handleCurrentChange:function(e){this.$emit("sonHandleCurrentChange",{pageNo:e})}},mounted:function(){this.$emit("sonHandleCurrentChange",{pageSize:10,pageNo:1})}},n=l(18),component=Object(n.a)(o,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-pagination",{attrs:{"current-page":this.widgetInfo.pageNo,"page-sizes":[10,15,20,25],"page-size":this.widgetInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.widgetInfo.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})],1)},[],!1,null,null,null);t.a=component.exports},603:function(e,t,l){var content=l(788);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,l(10).default)("3173bef8",content,!0,{sourceMap:!1})},787:function(e,t,l){"use strict";var o=l(603);l.n(o).a},788:function(e,t,l){(e.exports=l(9)(!1)).push([e.i,".list-wrap[data-v-36a99953],.list-wrap[data-v-36a99953] .el-table{width:100%}.list-wrap[data-v-36a99953] .el-table .el-table__body-wrapper{height:calc(100vh - 430px)}.hardware-form[data-v-36a99953]{font-size:0;padding:20px 20px 0}.hardware-form .el-form-item[data-v-36a99953]{width:20%;display:-webkit-inline-box;display:inline-flex;margin-right:0}.hardware-form .el-form-item .el-select[data-v-36a99953]{width:100%}.hardware-form .serch-btn button[data-v-36a99953]:first-child{margin-left:10px}[data-v-36a99953] .el-pagination{margin:0;padding-top:20px}@media screen and (max-width:1680px){.list-wrap[data-v-36a99953] .el-table .el-table__body-wrapper{height:calc(100vh - 410px)}}.add-btn-style[data-v-36a99953]{text-align:right;padding-right:25px;box-sizing:border-box}.hardware-form[data-v-36a99953]{padding:20px 25px 0}.list-wrap[data-v-36a99953]{height:calc(100vh - 315px);overflow:hidden}.list-wrap[data-v-36a99953] .el-table{padding:0;overflow:hidden}.list-wrap[data-v-36a99953] .el-table th{background:#f0f3f7}.list-wrap[data-v-36a99953] .el-table .el-table__body-wrapper{height:calc(100vh - 448px);overflow-y:auto}",""])}}]);