(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{1178:function(t,e,o){"use strict";o.r(e);o(2),o(3),o(4),o(5);var n,l=o(513),r={components:{Pagination:o(478).a},data:function(){return{loading:!1,elementDisplay:!1,deleteElement:"",addElement:!1,editElement:!1,StopCenter:!1,input:"",tableData:[],DeleteCenter:!1,dialogTitle:"新增应用系统",isShow:!1,editId:null,stopId:null,deleteId:null,dialogForm_title:"",update_code:!1,widgetInfo:{total:null,pageSize:6,pageNo:1},rules:{sysName:[{required:!0,trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],sysAlias:[{required:!0,trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],sysCode:[{required:!0,trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}]},formData:{},options:[{value:"",label:"全部"},{value:"2",label:"停用"},{value:"1",label:"已启用"}],sysStatus:"",testspan:12}},watch:{screenWidth:function(t){this.testspan=t<990?24:12}},mounted:function(){},methods:{handleCurrentChange:function(t){console.log("val",t),this.pageNo=t,this.getList(t)},changeStatus:function(t){this.sysStatus=t,this.widgetInfo.pageNo=1,this.getList(t)},getList:function(t){var e=this;this.loading=!0,this.$axios.$POST({api_name:"getSystemList",params:{pageSize:this.widgetInfo.pageSize||15,pageNo:this.widgetInfo.pageNo||1,sysStatus:this.sysStatus}}).then(function(t){e.loading=!1,console.log("应用权限列表---",t),t.data&&"success"===t.data.code?(console.log(t.data),e.tableData=t.data.data.rows,e.widgetInfo.total=null==t.data.data.total?0:t.data.data.total):console.log("错误...")})},sonHandleCurrentChange:function(t){this.widgetInfo.pageSize=t.pageSize?parseInt(t.pageSize):this.widgetInfo.pageSize,this.widgetInfo.pageNo=t.pageNo?parseInt(t.pageNo):this.widgetInfo.pageNo,this.getList()},addSystem:function(){this.dialogTitle="新增应用系统",this.isShow=!0,this.formData={},this.editId=null,this.update_code=!1},clearRule:function(t){this.$refs[t].resetFields(),this.$refs[t].clearValidate()},onConfirm:function(){var t=this;this.$refs.ruleForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$refs.ruleForm.clearValidate(),console.log(t.formData),t.editId?t.onEdit():t.onAdd()})},onAdd:function(){var t=this,param=this.formData;this.$axios.$POST({api_name:"addSystem",params:{sysCode:param.sysCode,sysName:param.sysName,sysAlias:param.sysAlias,sysRemark:param.sysRemark,dataRes:"03",createUserId:"wangxi"}}).then(function(e){console.log("新增系统保存按钮点击请求结果---",e),e.data&&"success"===e.data.code?(t.isShow=!1,t.widgetInfo.total=e.data.data.total,t.tableData=e.data.data.rows,t.$message({message:e.data.message,type:"success"}),t.getList()):(t.isShow=!1,t.$message.error(e.data.message),console.log("error...",e.data.message))})},onEdit:function(){var t=this,param=this.formData;this.$axios.$POST({api_name:"updateSystem",params:{sysCode:param.sysCode,sysName:param.sysName,sysAlias:param.sysAlias,sysRemark:param.sysRemark,dataRes:l.a,updateUserId:this.editId}}).then(function(e){console.log("编辑保存按钮点击请求结果---",e),e.data&&"success"===e.data.code?(t.isShow=!1,t.widgetInfo.total=e.data.data.total,t.tableData=e.data.data.rows,t.$message({message:e.data.message,type:"success"}),t.getList()):(t.isShow=!1,t.$message.error(e.data.message),console.log("error...",e.data.message))})},DeleteX:function(){this.addElement=!1,this.elementDisplay=!1},stopOperator:function(t){this.elementDisplay=!0,this.StopCenter=!0,this.dialogForm_title="2"!==t.sysStatus?"确认停用？":"确认启用？",n=t.sysStatus,this.DeleteCenter=!1,this.formData={sysName:t.sysName,sysAlias:t.sysAlias,sysCode:t.sysCode,sysRemark:t.sysRemark},this.stopId=t.id},StopSave:function(){var t=this,param=this.formData,e="1"===n?"2":"1";this.$axios.$POST({api_name:"updateSysStatus",params:{sysCode:param.sysCode,sysStatus:e}}).then(function(e){console.log("停用按钮点击请求结果---",e),e.data&&"success"===e.data.code?(t.elementDisplay=!1,t.StopCenter=!1,t.widgetInfo.total=e.data.data.total,t.tableData=e.data.data.rows,t.getList(),t.stopId=null,t.$message({message:e.data.message,type:"success"})):(t.elementDisplay=!1,t.StopCenter=!1,t.$message.error(e.data.message),console.log("error...",e.data.message))})},editOperator:function(t){console.log(t),this.dialogTitle="编辑应用系统",this.formData={sysName:t.sysName,sysAlias:t.sysAlias,sysCode:t.sysCode,sysRemark:t.sysRemark},this.editId=t.id,this.isShow=!0,this.update_code=!0},deleterOperator:function(t){var e=this;this.$confirm("确认删除资源?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.$POST({api_name:"deleteSystem",params:{sysCode:t.sysCode}}).then(function(t){var code=t.data.code,o=t.data.message;t&&"success"===code?(e.$message.success(o),e.getList()):e.$message.error(o)})})}}},d=(o(822),o(17)),component=Object(d.a)(r,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"resourceManage"},[o("div",{staticClass:"Crumbs"},[o("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",[t._v("权限平台")]),t._v(" "),o("el-breadcrumb-item",[t._v("应用系统管理")])],1)],1),t._v(" "),o("el-main",{staticClass:"content"},[o("el-row",{staticStyle:{"padding-top":"10px"}},[o("el-col",{staticClass:"search_status",attrs:{span:1}},[t._v("状态:")]),t._v(" "),o("el-col",{attrs:{span:3}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeStatus},model:{value:t.sysStatus,callback:function(e){t.sysStatus=e},expression:"sysStatus"}},t._l(t.options,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),o("el-col",{attrs:{span:16}}),t._v(" "),o("el-col",{staticStyle:{float:"right"},attrs:{span:2}},[o("el-button",{staticClass:"addButtonColor",attrs:{type:"primary"},on:{click:t.addSystem}},[t._v("添加")])],1)],1),t._v(" "),o("section",{staticClass:"section-top"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[o("el-table-column",{attrs:{width:"70%",label:"序号",type:"index","show-overflow-tooltip":!0}}),t._v(" "),o("el-table-column",{staticClass:"centerText",attrs:{label:"系统名称","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.sysName?e.row.sysName:"--"))])]}}])}),t._v(" "),o("el-table-column",{staticClass:"centerText",attrs:{label:"系统简称","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.sysAlias?e.row.sysAlias:"--"))])]}}])}),t._v(" "),o("el-table-column",{staticClass:"centerText",attrs:{prop:"systemCode",label:"系统code","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.sysCode?e.row.sysCode:"--"))])]}}])}),t._v(" "),o("el-table-column",{staticClass:"centerText",attrs:{prop:"sysRemark",label:"备注","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.sysRemark?e.row.sysRemark:"--"))])]}}])}),t._v(" "),o("el-table-column",{staticClass:"centerText",attrs:{prop:"sysStatus",label:"状态","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.sysStatus?"2"===e.row.sysStatus?"停用":"1"===e.row.sysStatus?"已启用":"未启用":"--"))])]}}])}),t._v(" "),o("el-table-column",{staticClass:"centerText",attrs:{prop:"systemOperator",label:"操作","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return t.stopOperator(e.row)}}},[t._v(t._s("1"===e.row.sysStatus?"停用":"启用")+" |")]),t._v(" "),o("el-button",{directives:[{name:"show",rawName:"v-show",value:"2"!==e.row.sysStatus,expression:"scope.row.sysStatus!=='2'"}],attrs:{type:"text",size:"small"},on:{click:function(o){return t.editOperator(e.row)}}},[t._v("编辑 |")]),t._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return t.deleterOperator(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),o("Pagination",{attrs:{widgetInfo:t.widgetInfo},on:{sonHandleCurrentChange:t.sonHandleCurrentChange}})],1),t._v(" "),o("el-dialog",{attrs:{title:t.dialogTitle,visible:t.isShow,width:"24%"},on:{"update:visible":function(e){t.isShow=e},close:function(e){return t.clearRule("ruleForm")}}},[o("el-row",[o("el-col",{attrs:{span:23}},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.formData,rules:t.rules,"label-width":"95px"}},[o("el-form-item",{attrs:{label:"系统名称:",prop:"sysName"}},[o("el-input",{attrs:{clearable:"",placeholder:"请输入系统名称"},model:{value:t.formData.sysName,callback:function(e){t.$set(t.formData,"sysName","string"==typeof e?e.trim():e)},expression:"formData.sysName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"系统简称:",prop:"sysAlias"}},[o("el-input",{attrs:{clearable:"",placeholder:"请输入系统简称"},model:{value:t.formData.sysAlias,callback:function(e){t.$set(t.formData,"sysAlias","string"==typeof e?e.trim():e)},expression:"formData.sysAlias"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"系统code:",prop:"sysCode"}},[o("el-input",{attrs:{clearable:"",disabled:t.update_code,placeholder:"请输入系统code"},model:{value:t.formData.sysCode,callback:function(e){t.$set(t.formData,"sysCode","string"==typeof e?e.trim():e)},expression:"formData.sysCode"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"备注:",prop:"sysRemark"}},[o("el-input",{attrs:{type:"textarea",clearable:"",placeholder:"请输入备注"},model:{value:t.formData.sysRemark,callback:function(e){t.$set(t.formData,"sysRemark","string"==typeof e?e.trim():e)},expression:"formData.sysRemark"}})],1)],1)],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.isShow=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.onConfirm}},[t._v("确 定")])],1)],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.elementDisplay,expression:"elementDisplay"}],staticClass:"shadeElement"},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.StopCenter,expression:"StopCenter"}],staticClass:"deleteContent"},[o("div",{staticClass:"deletaText"},[t._v(t._s(t.dialogForm_title))]),t._v(" "),o("div",{staticClass:"formButton formButtonTop"},[o("el-button",{on:{click:function(e){t.elementDisplay=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.StopSave}},[t._v("确认")])],1)])])],1)},[],!1,null,"15849fec",null);e.default=component.exports},478:function(t,e,o){"use strict";o(2),o(3),o(4),o(5);var n={props:{widgetInfo:Object},data:function(){return{}},methods:{handleSizeChange:function(t){this.pageSize=t,this.$emit("sonHandleCurrentChange",{pageSize:this.pageSize})},handleCurrentChange:function(t){this.$emit("sonHandleCurrentChange",{pageNo:t})}},mounted:function(){this.$emit("sonHandleCurrentChange",{pageSize:10,pageNo:1})}},l=o(17),component=Object(l.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("el-pagination",{attrs:{"current-page":this.widgetInfo.pageNo,"page-sizes":[10,15,20,25],"page-size":this.widgetInfo.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:this.widgetInfo.total},on:{"size-change":this.handleSizeChange,"current-change":this.handleCurrentChange}})],1)},[],!1,null,null,null);e.a=component.exports},513:function(t,e,o){"use strict";o.d(e,"b",function(){return n}),o.d(e,"a",function(){return l});o(2),o(3),o(4),o(5);var n={sysCode:"manager"},l="manager"},612:function(t,e,o){var content=o(823);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(14).default)("03a394a9",content,!0,{sourceMap:!1})},822:function(t,e,o){"use strict";var n=o(612);o.n(n).a},823:function(t,e,o){(t.exports=o(13)(!1)).push([t.i,".content[data-v-15849fec]{background-color:#fff!important}.system_manage_header[data-v-15849fec]{height:40px!important;box-shadow:none;background:#edf0f7;margin:0}.system_manage_header .bread_crumb[data-v-15849fec]{line-height:40px;box-shadow:none}.el-main[data-v-15849fec]{height:calc(100vh - 113px)!important;border:1px solid #e1e4e6}.search_status[data-v-15849fec]{padding-top:11px;font-size:16px}.addbutton[data-v-15849fec]{width:90px;height:32px;background-color:#409eff;color:#fff;line-height:32px}.addButtonColor[data-v-15849fec]{color:#fff!important;background:#409eff!important;float:right;width:86px;height:32px;padding:9px 15px;margin-bottom:4px}.shadeElement[data-v-15849fec]{width:100%;height:100vh;background:rgba(0,0,0,.5);display:table-cell;vertical-align:middle;text-align:center;position:fixed;left:0;top:0;z-index:900}.formContent[data-v-15849fec]{width:460px;height:320px;background:#fff;margin:244px auto}.formSystemName[data-v-15849fec]{margin-top:20px}.titleName[data-v-15849fec]{width:100%;height:50px;background:#254f85}.titleName .edit[data-v-15849fec]{width:50%;margin-left:20px;float:left}.titleName .deleteButton[data-v-15849fec],.titleName .edit[data-v-15849fec]{height:50px;line-height:50px;color:#fff;text-align:left;font-size:18px;font-weight:300}.titleName .deleteButton[data-v-15849fec]{width:10%;float:right}.formELement[data-v-15849fec]{width:100%;height:40px}.formELement .leftsystemName[data-v-15849fec]{width:124px;height:40px;line-height:40px;float:left}.formELement .el-input[data-v-15849fec]{width:300px;height:32px;margin-top:4px;margin-right:30px;float:right}.formELement .formsystemMark[data-v-15849fec],.formELement .leftsystemAddr[data-v-15849fec],.formELement .leftsystemCode[data-v-15849fec]{width:124px;height:40px;line-height:40px;float:left}.formELement i[data-v-15849fec]{color:#f15f5f}.formButton[data-v-15849fec]{margin-top:12px}.el-button+.el-button[data-v-15849fec]{margin-left:0}.section-top[data-v-15849fec]{margin-top:12px}td .cell[data-v-15849fec],th .cell[data-v-15849fec]{text-align:center}.deleteContent[data-v-15849fec]{width:340px;height:145px;margin:270px auto;border-radius:5px;background:#fff}.deletaText[data-v-15849fec]{padding-top:32px;height:16px;line-height:16px;font-size:16px}.formButtonTop[data-v-15849fec]{margin-top:30px}.el-table__row[data-v-15849fec]:nth-of-type(odd){background:#e7e7e7!important}",""])}}]);